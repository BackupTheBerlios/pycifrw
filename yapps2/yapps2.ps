%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86e Copyright 2001 Radical Eye Software
%%Title: yapps2.dvi
%%Pages: 17
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Palatino-Roman Palatino-Italic Courier Palatino-Bold
%%+ Courier-Oblique
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -q yapps2.dvi -o yapps2.ps
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2002.06.20:1436
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "1 July 1998",
%   filename = "8r.enc",
%   email = "tex-fonts@@tug.org",
%   docstring = "Encoding for TrueType or Type 1 fonts
%                to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both 
% ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin/SDict 200 dict N SDict begin/@SpecialDefaults{/hs 612 N
/vs 792 N/ho 0 N/vo 0 N/hsc 1 N/vsc 1 N/ang 0 N/CLIP 0 N/rwiSeen false N
/rhiSeen false N/letter{}N/note{}N/a4{}N/legal{}N}B/@scaleunit 100 N
/@hscale{@scaleunit div/hsc X}B/@vscale{@scaleunit div/vsc X}B/@hsize{
/hs X/CLIP 1 N}B/@vsize{/vs X/CLIP 1 N}B/@clip{/CLIP 2 N}B/@hoffset{/ho
X}B/@voffset{/vo X}B/@angle{/ang X}B/@rwi{10 div/rwi X/rwiSeen true N}B
/@rhi{10 div/rhi X/rhiSeen true N}B/@llx{/llx X}B/@lly{/lly X}B/@urx{
/urx X}B/@ury{/ury X}B/magscale true def end/@MacSetUp{userdict/md known
{userdict/md get type/dicttype eq{userdict begin md length 10 add md
maxlength ge{/md md dup length 20 add dict copy def}if end md begin
/letter{}N/note{}N/legal{}N/od{txpose 1 0 mtx defaultmatrix dtransform S
atan/pa X newpath clippath mark{transform{itransform moveto}}{transform{
itransform lineto}}{6 -2 roll transform 6 -2 roll transform 6 -2 roll
transform{itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll
curveto}}{{closepath}}pathforall newpath counttomark array astore/gc xdf
pop ct 39 0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}
if}N/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1
-1 scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3
get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip
yflip not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub
neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{
noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop
90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr
1 get neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr
2 get ppr 0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4
-1 roll add 2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S
TR}if}N/cp{pop pop showpage pm restore}N end}if}if}N/normalscale{
Resolution 72 div VResolution 72 div neg scale magscale{DVImag dup scale
}if 0 setgray}N/psfts{S 65781.76 div N}N/startTexFig{/psf$SavedState
save N userdict maxlength dict begin/magscale true def normalscale
currentpoint TR/psf$ury psfts/psf$urx psfts/psf$lly psfts/psf$llx psfts
/psf$y psfts/psf$x psfts currentpoint/psf$cy X/psf$cx X/psf$sx psf$x
psf$urx psf$llx sub div N/psf$sy psf$y psf$ury psf$lly sub div N psf$sx
psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub
TR/showpage{}N/erasepage{}N/copypage{}N/p 3 def @MacSetUp}N/doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N/endTexFig{end psf$SavedState restore}N/@beginspecial{SDict
begin/SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count/ocount X/dcount countdictstack N}N/@setspecial{
CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if/showpage{}N/erasepage{}N/copypage{}N newpath}N
/@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{end}
repeat grestore SpecialSave restore end}N/@defspecial{SDict begin}N
/@fedspecial{end}B/li{lineto}B/rl{rlineto}B/rc{rcurveto}B/np{/SaveX
currentpoint/SaveY X N 1 setlinecap newpath}N/st{stroke SaveX SaveY
moveto}N/fil{fill SaveX SaveY moveto}N/ellipse{/endangle X/startangle X
/yrad X/xrad X/savematrix matrix currentmatrix N TR xrad yrad scale 0 0
1 startangle endangle arc savematrix setmatrix}N end

%%EndProcSet
%%BeginProcSet: color.pro
%!
TeXDict begin/setcmykcolor where{pop}{/setcmykcolor{dup 10 eq{pop
setrgbcolor}{1 sub 4 1 roll 3{3 index add neg dup 0 lt{pop 0}if 3 1 roll
}repeat setrgbcolor pop}ifelse}B}ifelse/TeXcolorcmyk{setcmykcolor}def
/TeXcolorrgb{setrgbcolor}def/TeXcolorgrey{setgray}def/TeXcolorgray{
setgray}def/TeXcolorhsb{sethsbcolor}def/currentcmykcolor where{pop}{
/currentcmykcolor{currentrgbcolor 10}B}ifelse/DC{exch dup userdict exch
known{pop pop}{X}ifelse}B/GreenYellow{0.15 0 0.69 0 setcmykcolor}DC
/Yellow{0 0 1 0 setcmykcolor}DC/Goldenrod{0 0.10 0.84 0 setcmykcolor}DC
/Dandelion{0 0.29 0.84 0 setcmykcolor}DC/Apricot{0 0.32 0.52 0
setcmykcolor}DC/Peach{0 0.50 0.70 0 setcmykcolor}DC/Melon{0 0.46 0.50 0
setcmykcolor}DC/YellowOrange{0 0.42 1 0 setcmykcolor}DC/Orange{0 0.61
0.87 0 setcmykcolor}DC/BurntOrange{0 0.51 1 0 setcmykcolor}DC
/Bittersweet{0 0.75 1 0.24 setcmykcolor}DC/RedOrange{0 0.77 0.87 0
setcmykcolor}DC/Mahogany{0 0.85 0.87 0.35 setcmykcolor}DC/Maroon{0 0.87
0.68 0.32 setcmykcolor}DC/BrickRed{0 0.89 0.94 0.28 setcmykcolor}DC/Red{
0 1 1 0 setcmykcolor}DC/OrangeRed{0 1 0.50 0 setcmykcolor}DC/RubineRed{
0 1 0.13 0 setcmykcolor}DC/WildStrawberry{0 0.96 0.39 0 setcmykcolor}DC
/Salmon{0 0.53 0.38 0 setcmykcolor}DC/CarnationPink{0 0.63 0 0
setcmykcolor}DC/Magenta{0 1 0 0 setcmykcolor}DC/VioletRed{0 0.81 0 0
setcmykcolor}DC/Rhodamine{0 0.82 0 0 setcmykcolor}DC/Mulberry{0.34 0.90
0 0.02 setcmykcolor}DC/RedViolet{0.07 0.90 0 0.34 setcmykcolor}DC
/Fuchsia{0.47 0.91 0 0.08 setcmykcolor}DC/Lavender{0 0.48 0 0
setcmykcolor}DC/Thistle{0.12 0.59 0 0 setcmykcolor}DC/Orchid{0.32 0.64 0
0 setcmykcolor}DC/DarkOrchid{0.40 0.80 0.20 0 setcmykcolor}DC/Purple{
0.45 0.86 0 0 setcmykcolor}DC/Plum{0.50 1 0 0 setcmykcolor}DC/Violet{
0.79 0.88 0 0 setcmykcolor}DC/RoyalPurple{0.75 0.90 0 0 setcmykcolor}DC
/BlueViolet{0.86 0.91 0 0.04 setcmykcolor}DC/Periwinkle{0.57 0.55 0 0
setcmykcolor}DC/CadetBlue{0.62 0.57 0.23 0 setcmykcolor}DC
/CornflowerBlue{0.65 0.13 0 0 setcmykcolor}DC/MidnightBlue{0.98 0.13 0
0.43 setcmykcolor}DC/NavyBlue{0.94 0.54 0 0 setcmykcolor}DC/RoyalBlue{1
0.50 0 0 setcmykcolor}DC/Blue{1 1 0 0 setcmykcolor}DC/Cerulean{0.94 0.11
0 0 setcmykcolor}DC/Cyan{1 0 0 0 setcmykcolor}DC/ProcessBlue{0.96 0 0 0
setcmykcolor}DC/SkyBlue{0.62 0 0.12 0 setcmykcolor}DC/Turquoise{0.85 0
0.20 0 setcmykcolor}DC/TealBlue{0.86 0 0.34 0.02 setcmykcolor}DC
/Aquamarine{0.82 0 0.30 0 setcmykcolor}DC/BlueGreen{0.85 0 0.33 0
setcmykcolor}DC/Emerald{1 0 0.50 0 setcmykcolor}DC/JungleGreen{0.99 0
0.52 0 setcmykcolor}DC/SeaGreen{0.69 0 0.50 0 setcmykcolor}DC/Green{1 0
1 0 setcmykcolor}DC/ForestGreen{0.91 0 0.88 0.12 setcmykcolor}DC
/PineGreen{0.92 0 0.59 0.25 setcmykcolor}DC/LimeGreen{0.50 0 1 0
setcmykcolor}DC/YellowGreen{0.44 0 0.74 0 setcmykcolor}DC/SpringGreen{
0.26 0 0.76 0 setcmykcolor}DC/OliveGreen{0.64 0 0.95 0.40 setcmykcolor}
DC/RawSienna{0 0.72 1 0.45 setcmykcolor}DC/Sepia{0 0.83 1 0.70
setcmykcolor}DC/Brown{0 0.81 1 0.60 setcmykcolor}DC/Tan{0.14 0.42 0.56 0
setcmykcolor}DC/Gray{0 0 0 0.50 setcmykcolor}DC/Black{0 0 0 1
setcmykcolor}DC/White{0 0 0 0 setcmykcolor}DC end

%%EndProcSet
TeXDict begin 39158280 55380996 1000 600 600 (yapps2.dvi)
@start /Fa 168[66 2[41 35 44 2[52 2[41 2[22 2[37 70[{
TeXBase1Encoding ReEncodeFont}8 66.4176 /Palatino-Roman
rf /Fb 135[50 5[50 1[50 1[50 50 5[50 1[50 3[50 97[{
TeXBase1Encoding ReEncodeFont}8 83.022 /Courier-Oblique
rf
%DVIPSBitmapFont: Fc cmmi10 10 8
/Fc 8 117 df<EC3FF0EB01FF010F13E090383FC00049C7FC13FCEA03F8485A5B120F48
5AA2485AA2387FFFFE80A290C8FC5A5AA5127EA4123E123F7E6C6C13606D13E03903E003
C03901F01F0038007FFCEB0FE01C257DA322>15 D<147E903803FF8090390FC1C3809039
1F00EFC0017E137F49133F485A4848EB1F8012075B000F143F48481400A2485A5D007F14
7E90C7FCA215FE485C5AA214015D48150CA21403EDF01C16181407007C1538007E010F13
30003E131F027B13706C01E113E03A0F83C0F9C03A03FF007F80D800FCEB1F0026267DA4
2C>97 D<EC3FC0903801FFF0903807E03C90380F800E90383F0007017E131F49137F4848
13FF485A485A120F4913FE001F143848481300A2127F90C8FCA35A5AA45AA31503150700
7E1406150E003E143C003F14706C14E0390F8007C03907C03F003801FFF838003FC02026
7DA424>99 D<EC3FC0903801FFF0903807E07890381F801C90387E001E49130E485A485A
1207485A49131E001F141C153C484813F8EC03E0007FEB3FC09038FFFE0014E090C8FC5A
5AA7007E140315071506003E140E153C6C14706C6C13E0EC07C03903E03F003801FFF838
003FC020267DA427>101 D<14E0EB03F8A21307A314F0EB01C090C7FCAB13F8EA03FEEA
070F000E1380121C121812381230EA701F1260133F00E0130012C05BEA007EA213FE5B12
01A25B12035BA20007131813E01438000F133013C01470EB806014E014C01381EB838038
078700EA03FEEA00F815397EB71D>105 D<EB0FC0EA03FF5AA2EA001F1480A2133FA214
00A25BA2137EA213FEA25BA21201A25BA21203A25BA21207A25BA2120FA25BA2121FA25B
A2123FA290C7FCA25AA2EA7E03A2EAFE07130612FCA2130E130C131C1318EA7C38EA3C70
EA1FE0EA0780123B7DB919>108 D<3903E001F83907F807FE390E3C1E07391C3E381F3A
183F703F800038EBE07F0030EBC0FF00705B00601500EC007E153CD8E07F90C7FCEAC07E
A2120013FE5BA312015BA312035BA312075BA3120F5BA3121F5B0007C9FC21267EA425>
114 D<EB01C0497E1307A4130F5CA3131F5CA3133F91C7FC007FB51280A2B6FCD8007EC7
FCA313FE5BA312015BA312035BA312075BA3120FEBC006A2140E001F130CEB801C141814
385C146014E0380F81C038078780D803FEC7FCEA00F819357EB31E>116
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fd cmsy10 10 1
/Fd 1 16 df<EB1FF0EBFFFE487F000714C04814E04814F04814F8A24814FCA3B612FEA9
6C14FCA36C14F8A26C14F06C14E06C14C0000114006C5BEB1FF01F1F7BA42A>15
D E
%EndDVIPSBitmapFont
/Fe 133[50 55 50 83 55 61 33 44 39 1[61 55 61 89 33 1[33
33 61 55 39 50 61 44 61 50 10[78 2[61 72 1[61 83 1[100
61 2[39 1[83 55 61 1[72 1[78 11[50 50 50 50 50 2[25 33
45[{TeXBase1Encoding ReEncodeFont}44 99.6264 /Palatino-Bold
rf /Ff 138[51 28 37 32 1[51 1[51 74 3[28 51 46 1[42 3[42
7[55 6[60 10[69 2[69 4[37 60[51 2[{TeXBase1Encoding ReEncodeFont}18
83.022 /Palatino-Bold rf /Fg 134[42 42 60 42 46 28 32
32 1[42 37 46 65 23 37 1[23 42 42 23 32 42 34 38 37 7[55
4[51 3[51 1[65 19[21 10[25 21 28 21 2[28 28 37[44 2[{
TeXBase1Encoding ReEncodeFont}35 83.022 /Palatino-Italic
rf /Fh 133[60 66 60 2[73 40 53 47 1[73 66 73 106 40 2[40
73 66 47 60 73 53 73 60 11[93 80 1[86 1[73 2[120 3[47
100 100 66 73 100 86 80 93 11[60 60 60 60 60 49[{
TeXBase1Encoding ReEncodeFont}40 119.552 /Palatino-Bold
rf /Fi 104[83 2[42 42 24[42 46 43 69 47 50 27 35 33 46
50 45 48 73 24 46 19 24 48 46 28 40 51 37 46 42 7[55
1[83 60 65 51 44 55 1[50 65 69 79 51 60 28 28 69 63 46
51 64 59 51 65 5[21 21 42 42 42 42 42 42 42 42 42 42
50 21 28 21 50 1[28 28 23 5[23 29[50 50 2[{
TeXBase1Encoding ReEncodeFont}75 83.022 /Palatino-Roman
rf /Fj 103[50 15[50 10[50 50 50 50 50 50 50 50 50 50
50 50 1[50 50 50 50 50 50 50 50 50 50 50 50 50 50 50
50 1[50 1[50 50 50 50 50 50 50 50 50 50 50 50 1[50 50
50 50 50 1[50 50 50 50 50 50 50 50 50 50 50 50 50 50
50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50
50 50 50 50 50 50 50 50 50 50 33[{TeXBase1Encoding ReEncodeFont}90
83.022 /Courier rf /Fk 140[47 2[60 14[53 7[80 89[{
TeXBase1Encoding ReEncodeFont}4 119.552 /Palatino-Italic
rf /Fl 134[66 4[39 51 47 2[65 70 106 4[70 2[57 3[60 12[73
63 2[72 8[91 71[{TeXBase1Encoding ReEncodeFont}14 119.552
/Palatino-Roman rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: A4

%%EndSetup
%%Page: 1 1
1 0 bop Black Black Black Black 981 220 a Fl(The)30 b
Fk(Y)-11 b(apps)29 b Fl(Parser)h(Generator)h(System)913
323 y Fj(http://theory.stanford.edu/\230amitp/Yap)o(ps/)1709
423 y Fi(V)-9 b(ersion)21 b(2.0)1679 622 y(Amit)g(J.)f(Patel)1035
722 y(http://www-cs-students.stanfor)o(d.edu/)h(amitp/)150
982 y Fh(1)p 0 0 0.6 TeXcolorrgb 119 w(Introduction)p
Black 150 1171 a Fg(Y)-8 b(apps)28 b Fi(\(Y)p 406 1185
56 4 v(et)h(A)p 557 1185 65 4 v -1 w(nother)g(P)p 891
1185 51 4 v(ython)h(P)p 1185 1185 V(arser)e(S)p 1446
1186 44 4 v -1 w(ystem\))h(is)g(an)f(easy)g(to)h(use)f(parser)g
(generator)g(that)g(is)h(written)g(in)150 1271 y(Python)23
b(and)d(generates)h(Python)h(code.)27 b(Ther)o(e)20 b(ar)o(e)g(several)
g(parser)g(generator)h(systems)h(alr)o(eady)d(available)150
1371 y(for)d(Python,)i(including)f Fj(PyLR,)48 b(kjParsing,)g(PyBison,)
16 b Fi(and)f Fj(mcf.pars,)g Fi(but)h(I)g(had)g(dif)o(fer)o(ent)e
(goals)150 1470 y(for)27 b(my)g(parser)-6 b(.)43 b(Y)-8
b(apps)28 b(is)f(simple,)i(is)e(easy)g(to)g(use,)i(and)d(pr)o(oduces)h
(human-r)o(eadable)d(parsers.)44 b(It)27 b(is)g(not)150
1570 y(the)e(fastest)f(or)h(most)h(powerful)e(parser)-6
b(.)36 b(Y)-8 b(apps)25 b(is)g(designed)g(to)g(be)f(used)h(when)g(r)o
(egular)f(expr)o(essions)g(ar)o(e)150 1670 y(not)j(enough)g(and)f
(other)h(parser)e(systems)i(ar)o(e)e(too)i(much:)37 b(situations)27
b(wher)o(e)f(you)h(may)f(write)g(your)h(own)150 1769
y(r)o(ecursive)20 b(descent)g(parser)-6 b(.)275 1869
y(Some)20 b(unusual)h(featur)o(es)e(of)i(Y)-8 b(apps)21
b(that)g(may)g(be)f(of)h(inter)o(est)f(ar)o(e:)p Black
254 2051 a(1.)p Black 41 w(Y)-8 b(apps)18 b(pr)o(oduces)f(r)o(ecursive)
g(descent)h(parsers)f(that)h(ar)o(e)f(r)o(eadable)e(by)j(humans,)i(as)d
(opposed)h(to)h(table-)358 2151 y(driven)f(parsers)h(that)g(ar)o(e)f
(dif)o(\002cult)g(to)i(r)o(ead.)j(A)c(Y)-8 b(apps)19
b(parser)f(for)h(a)g(simple)h(calculator)e(looks)j(similar)358
2251 y(to)g(the)g(one)g(that)f(Mark)g(Lutz)g(wr)o(ote)h(by)g(hand)f
(for)h Fg(Pr)o(ogramming)e(Python.)p Black 254 2417 a
Fi(2.)p Black 41 w(Y)-8 b(apps)29 b(also)h(allows)g(for)f(r)o(ules)h
(that)f(accept)f(parameters)g(and)h(pass)g(ar)o(guments)g(to)h(be)f
(used)g(while)358 2516 y(parsing)24 b(subexpr)o(essions.)35
b(Grammars)24 b(that)g(allow)g(for)g(ar)o(guments)f(to)i(be)e(passed)h
(to)g(subr)o(ules)g(and)358 2616 y(for)g(values)g(to)h(be)g(passed)e
(back)i(ar)o(e)e(often)h(called)g Fg(attribute)h(grammars.)36
b Fi(In)25 b(many)g(cases)f(parameter)o(-)358 2716 y(ized)17
b(r)o(ules)h(can)f(be)h(used)f(to)h(perform)g(actions)g(at)f(\223parse)
g(time\224)h(that)f(ar)o(e)g(usually)h(delayed)f(until)h(later)-6
b(.)358 2815 y(For)18 b(example,)f(information)i(about)f(variable)f
(declarations)h(can)f(be)h(passed)f(into)i(the)f(r)o(ules)h(that)f
(parse)358 2915 y(a)24 b(pr)o(ocedur)o(e)g(body)-9 b(,)26
b(so)g(that)f(unde\002ned)g(variables)f(can)h(be)g(detected)f(at)h
(parse)g(time.)39 b(The)26 b(types)f(of)358 3015 y(de\002ned)18
b(variables)h(can)g(be)g(used)g(in)g(parsing)h(as)f(well\227for)g
(example,)g(if)g(the)g(type)g(of)h Fj(X)f Fi(is)g(known,)i(we)358
3114 y(can)f(determine)g(whether)h Fj(X\(1\))f Fi(is)i(an)e(array)g(r)o
(efer)o(ence)e(or)j(a)f(function)i(call.)p Black 254
3280 a(3.)p Black 41 w(Y)-8 b(apps)27 b(grammars)h(ar)o(e)e(fairly)h
(easy)g(to)h(write,)h(although)g(ther)o(e)e(ar)o(e)f(some)i
(inconveniences)h(having)358 3380 y(to)e(do)f(with)i(ELL\(1\))d
(parsing)h(that)h(have)f(to)h(be)g(worked)f(ar)o(ound.)43
b(For)27 b(example,)g(r)o(ules)g(have)f(to)h(be)358 3479
y(left)22 b(factor)o(ed)f(and)h(r)o(ules)h(may)f(not)i(be)e(left)g(r)o
(ecursive.)30 b(However)-6 b(,)23 b(neither)f(limitation)i(seems)f(to)g
(be)f(a)358 3579 y(pr)o(oblem)e(in)h(practice.)358 3712
y(Y)-8 b(apps)30 b(grammars)f(look)i(similar)f(to)g(the)g(notation)h
(used)e(in)h(the)g(Python)h(r)o(efer)o(ence)d(manual,)j(with)358
3812 y(operators)26 b(like)g Fj(*)p Fi(,)i Fj(+)p Fi(,)f
Fj(|)p Fi(,)h Fj([])p Fi(,)f(and)f Fj(\(\))g Fi(for)g(patterns,)h
(names)g(\()p Fj(tim)p Fi(\))e(for)h(r)o(ules,)i(r)o(egular)d(expr)o
(essions)358 3911 y(\()p Fj("[a-z]+")p Fi(\))18 b(for)j(tokens,)g(and)f
Fj(#)h Fi(for)f(comments.)p Black 254 4077 a(4.)p Black
41 w(The)31 b(Y)-8 b(apps)32 b(parser)f(generator)g(is)h(written)g(as)f
(a)h(single)g(Python)h(module)f(with)g(no)h(C)e(extensions.)358
4177 y(Y)-8 b(apps)19 b(pr)o(oduces)g(parsers)f(that)i(ar)o(e)e
(written)i(entir)o(ely)f(in)h(Python,)h(and)e(r)o(equir)o(e)f(only)j
(the)e(Y)-8 b(apps)20 b(r)o(un-)358 4276 y(time)h(module)g(\(5k\))e
(for)i(support.)p Black 254 4442 a(5.)p Black 41 w(Y)-8
b(apps's)31 b(scanner)f(is)h(context-sensitive,)i(picking)e(tokens)g
(based)f(on)h(the)f(types)h(of)f(the)h(tokens)g(ac-)358
4542 y(cepted)19 b(by)h(the)h(parser)-6 b(.)24 b(This)d(can)f(be)g
(helpful)g(when)h(implementing)g(certain)f(kinds)h(of)f(parsers,)g
(such)358 4642 y(as)g(for)h(a)f(pr)o(epr)o(ocessor)-6
b(.)275 4824 y(Ther)o(e)19 b(ar)o(e)h(several)g(disadvantages)f(of)i
(using)g(Y)-8 b(apps)21 b(over)g(another)g(parser)f(system:)p
Black 254 5007 a(1.)p Black 41 w(Y)-8 b(apps)29 b(parsers)g(ar)o(e)f
Fj(ELL\(1\))g Fi(\(Extended)h(LL\(1\)\),)g(which)h(is)g(less)g
(powerful)g(than)f Fj(LALR)g Fi(\(used)g(by)358 5107
y Fj(PyLR)p Fi(\))i(or)i Fj(SLR)f Fi(\(used)g(by)g Fj(kjParsing)p
Fi(\),)h(so)g(Y)-8 b(apps)33 b(would)g(not)g(be)g(a)f(good)h(choice)g
(for)f(parsing)358 5206 y(complex)22 b(languages.)29
b(For)22 b(example,)f(allowing)i(both)g Fj(x)49 b(:=)h(5;)22
b Fi(and)f Fj(x;)h Fi(as)g(statements)g(is)h(dif)o(\002cult)p
Black 1899 5482 a(1)p Black eop
%%Page: 2 2
2 1 bop Black Black 358 216 a Fi(because)30 b(we)h(must)g(distinguish)i
(based)d(on)i(only)g(one)f(token)h(of)f(lookahead.)56
b(Seeing)31 b(only)h Fj(x)p Fi(,)h(we)358 315 y(cannot)19
b(decide)f(whether)i(we)f(have)g(an)g(assignment)h(statement)f(or)g(an)
g(expr)o(ession)g(statement.)25 b(\(Note)358 415 y(however)20
b(that)h(this)h(kind)f(of)f(grammar)h(can)f(be)h(matched)f(with)h
(backtracking;)f(see)h(section)g(E.\))p Black 254 581
a(2.)p Black 41 w(The)k(scanner)g(that)g(Y)-8 b(apps)26
b(pr)o(ovides)e(can)h(only)i(r)o(ead)c(fr)o(om)i(strings,)i(not)f
(\002les,)h(so)f(an)f(entir)o(e)g(\002le)g(has)358 681
y(to)i(be)g(r)o(ead)e(in)j(befor)o(e)e(scanning)i(can)f(begin.)45
b(It)27 b(is)h(possible)f(to)h(build)f(a)g(custom)h(scanner)-6
b(,)28 b(though,)358 780 y(so)g(in)f(cases)g(wher)o(e)g(str)o(eam)g
(input)h(is)g(needed)e(\(fr)o(om)h(the)h(console,)h(a)e(network,)j(or)d
(a)g(lar)o(ge)g(\002le)g(ar)o(e)358 880 y(examples\),)17
b(the)i(Y)-8 b(apps)19 b(parser)f(can)g(be)g(given)h(a)f(custom)i
(scanner)e(that)h(r)o(eads)e(fr)o(om)h(a)g(str)o(eam)g(instead)358
980 y(of)i(a)h(string.)p Black 254 1146 a(3.)p Black
41 w(Y)-8 b(apps)21 b(is)g(not)g(designed)g(with)g(ef)o(\002ciency)f
(in)i(mind.)275 1328 y(Y)-8 b(apps)30 b(pr)o(ovides)g(an)g(easy)h(to)f
(use)h(parser)e(generator)h(that)h(pr)o(oduces)e(parsers)h(similar)h
(to)g(what)f(you)150 1428 y(might)23 b(write)f(by)g(hand.)29
b(It)23 b(is)f(not)h(meant)f(to)g(be)g(a)f(solution)j(for)e(all)g
(parsing)g(pr)o(oblems,)g(but)g(instead)g(an)g(aid)150
1528 y(for)27 b(those)i(times)f(you)g(would)g(write)g(a)f(parser)f(by)i
(hand)f(rather)g(than)h(using)g(one)h(of)e(the)h(mor)o(e)f(powerful)150
1627 y(parsing)21 b(packages)f(available.)275 1727 y(Y)-8
b(apps)22 b(2.0)e(is)i(easier)g(to)g(use)g(than)g(Y)-8
b(apps)22 b(1.0.)27 b(New)22 b(featur)o(es)e(include)i(a)g(less)g(r)o
(estrictive)f(input)h(syntax,)150 1826 y(which)i(allows)g(mixing)g(of)f
(sequences,)h(choices,)g(terminals,)f(and)g(nonterminals;)i(optional)f
(matching;)h(the)150 1926 y(ability)f(to)g(insert)g(single-line)h
(statements)f(into)g(the)g(generated)f(parser;)h(and)f(looping)i
(constr)o(ucts)g Fj(*)f Fi(and)f Fj(+)150 2026 y Fi(similar)i(to)f(the)
h(r)o(epetitive)e(matching)i(constr)o(ucts)g(in)g(r)o(egular)e(expr)o
(essions.)36 b(Unfortunately)-9 b(,)25 b(the)f(addition)150
2125 y(of)c(these)f(constr)o(ucts)i(has)e(made)g(Y)-8
b(apps)20 b(2.0)e(incompatible)i(with)h(Y)-8 b(apps)20
b(1.0,)e(so)i(grammars)f(will)h(have)f(to)h(be)150 2225
y(r)o(ewritten.)25 b(See)20 b(section)h Ff(??)g Fi(for)f(tips)h(on)h
(changing)f(Y)-8 b(apps)21 b(1.0)f(grammars)g(for)h(use)g(with)g(Y)-8
b(apps)21 b(2.0.)150 2511 y Fh(2)p 0 0 0.6 TeXcolorrgb
119 w(Examples)p Black 150 2700 a Fi(In)f(this)h(section)f(ar)o(e)e
(several)h(examples)g(that)h(show)h(the)f(use)g(of)g(Y)-8
b(apps.)25 b(First,)20 b(an)g(intr)o(oduction)g(shows)h(how)150
2800 y(to)h(constr)o(uct)h(grammars)f(and)f(write)h(them)h(in)f(Y)-8
b(apps)22 b(form.)29 b(This)23 b(example)e(can)h(be)f(skipped)h(by)g
(someone)150 2899 y(familiar)j(with)h(grammars)f(and)g(parsing.)39
b(Next)25 b(is)h(a)f(Lisp)g(expr)o(ession)g(grammar)g(that)g(pr)o
(oduces)g(a)g(parse)150 2999 y(tr)o(ee)17 b(as)h(output.)25
b(This)18 b(example)f(demonstrates)i(the)f(use)g(of)g(tokens)h(and)e(r)
o(ules,)i(as)e(well)i(as)e(r)o(eturning)h(values)150
3098 y(fr)o(om)j(r)o(ules.)28 b(The)21 b(thir)o(d)h(example)e(is)i(a)f
(expr)o(ession)g(evaluation)h(grammar)e(that)i(evaluates)e(during)i
(parsing)150 3198 y(\(instead)e(of)h(pr)o(oducing)f(a)h(parse)f(tr)o
(ee\).)150 3441 y Fe(2.1)p 0 0 0.3 TeXcolorrgb 99 w(Introduction)26
b(to)f(Grammars)p Black 150 3599 a Fi(A)h Fg(grammar)f
Fi(for)h(a)g(natural)g(language)g(speci\002es)g(how)i(wor)o(ds)e(can)g
(be)g(put)g(together)h(to)f(form)h(lar)o(ge)e(str)o(uc-)150
3698 y(tur)o(es,)k(such)f(as)g(phrases)f(and)g(sentences.)47
b(A)28 b(grammar)f(for)h(a)f(computer)h(language)f(is)i(similar)f(in)g
(that)g(it)150 3798 y(speci\002es)d(how)g(small)g(components)i
(\(called)c Fg(tokens)p Fi(\))i(can)f(be)g(put)h(together)g(to)g(form)g
(lar)o(ger)f(str)o(uctur)o(es.)37 b(In)150 3898 y(this)21
b(section)h(we)f(will)g(write)g(a)f(grammar)g(for)h(a)f(tiny)i(subset)f
(of)f(English.)275 3997 y(Simple)c(English)i(sentences)f(can)f(be)h
(described)f(as)g(being)h(a)f(noun)i(phrase)e(followed)h(by)g(a)g(verb)
f(followed)150 4097 y(by)21 b(a)g(noun)h(phrase.)k(For)21
b(example,)f(in)i(the)f(sentence,)g(\223Jack)f(sank)h(the)g(blue)g
(ship,\224)g(the)g(wor)o(d)g(\223Jack\224)e(is)j(the)150
4197 y(\002rst)g(noun)i(phrase,)d(\223sank\224)h(is)g(the)g(verb,)g
(and)f(\223the)h(blue)g(ship\224)g(is)h(the)f(second)g(noun)i(phrase.)
29 b(In)22 b(addition)150 4296 y(we)30 b(should)h(say)f(what)g(a)g
(noun)h(phrase)e(is;)35 b(for)30 b(this)h(example)e(we)h(shall)h(say)e
(that)i(a)e(noun)i(phrase)f(is)g(an)150 4396 y(optional)21
b(article)f(\(a,)f(an,)h(the\))h(followed)f(by)h(any)f(number)h(of)f
(adjectives)g(followed)h(by)f(a)g(noun.)27 b(The)20 b(tokens)150
4495 y(in)25 b(our)f(language)g(ar)o(e)e(the)i(articles,)h(nouns,)h
(verbs,)e(and)f(adjectives.)35 b(The)24 b Fg(rules)i
Fi(in)e(our)g(language)g(will)h(tell)150 4595 y(us)c(how)h(to)f
(combine)g(the)g(tokens)h(together)f(to)g(form)g(lists)g(of)g
(adjectives,)f(noun)i(phrases,)e(and)g(sentences:)p Black
275 4778 a Fd(\017)p Black 41 w Fj(sentence:)98 b(noun)p
1111 4778 25 4 v 29 w(phrase)48 b(verb)h(noun)p 1937
4778 V 30 w(phrase)p Black 275 4944 a Fd(\017)p Black
41 w Fj(noun)p 563 4944 V 29 w(phrase:)1902 5043 y Fc(ar)r(ticl)r(e)358
5193 y Fj(adjective*)f(noun)p Black 1899 5482 a Fi(2)p
Black eop
%%Page: 3 3
3 2 bop Black Black 275 216 a Fi(Notice)17 b(that)g(some)h(things)h
(that)e(we)g(said)g(easily)g(in)h(English,)h(such)f(as)f(\223optional)g
(article,\224)g(ar)o(e)f(expr)o(essed)150 315 y(using)32
b(special)e(syntax,)j(such)e(as)g(brackets.)54 b(When)31
b(we)g(said,)i(\223any)d(number)h(of)g(adjectives,\224)h(we)e(wr)o(ote)
150 415 y Fj(adjective*)p Fi(,)19 b(wher)o(e)h(the)h
Fj(*)f Fi(means)h(\223zer)o(o)e(or)i(mor)o(e)g(of)f(the)h(pr)o(eceding)
f(pattern\224.)275 515 y(The)30 b(grammar)f(given)h(above)g(is)g(close)
h(to)f(a)g(Y)-8 b(apps)30 b(grammar)-6 b(.)52 b(W)-8
b(e)31 b(also)f(have)f(to)i(specify)f(what)g(the)150
614 y(tokens)h(ar)o(e,)f(and)f(what)h(to)g(do)g(when)g(a)g(pattern)f
(is)h(matched.)52 b(For)30 b(this)g(example,)h(we)f(will)h(do)e
(nothing)150 714 y(when)21 b(patterns)g(ar)o(e)e(matched;)h(the)h(next)
g(example)f(will)h(explain)g(how)g(to)g(perform)g(match)g(actions.)p
Black Black 150 897 a Fj(parser)49 b(TinyEnglish:)250
996 y(ignore:)496 b("\\\\W+")250 1096 y(token)49 b(noun:)297
b("\(Jack|spam|ship\)")250 1196 y(token)49 b(verb:)297
b("\(sank|threw\)")250 1295 y(token)49 b(article:)147
b("\(a|an|the\)")250 1395 y(token)49 b(adjective:)e
("\(blue|red|green\)")250 1594 y(rule)i(sentence:)347
b(noun_phrase)47 b(verb)j(noun_phrase)250 1694 y(rule)f(noun_phrase:)
197 b([article])48 b(adjective*)g(noun)275 1876 y Fi(The)18
b(tokens)i(ar)o(e)e(speci\002ed)g(as)h(Python)h Fg(r)o(egular)f(expr)o
(essions)p Fi(.)25 b(Since)18 b(Y)-8 b(apps)20 b(pr)o(oduces)e(Python)i
(code,)e(you)150 1976 y(can)30 b(write)f(any)h(r)o(egular)f(expr)o
(ession)h(that)f(would)i(be)e(accepted)g(by)h(Python.)54
b(\()p Fg(Note:)42 b Fi(These)30 b(ar)o(e)f(Python)150
2076 y(1.5)22 b(r)o(egular)g(expr)o(essions)h(fr)o(om)f(the)h
Fj(re)g Fi(module,)h(not)f(Python)i(1.4)c(r)o(egular)h(expr)o(essions)h
(fr)o(om)g(the)g Fj(regex)150 2175 y Fi(module.\))i(In)18
b(addition)g(to)g(tokens)h(that)f(you)h(want)f(to)g(see)g(\(which)h(ar)
o(e)d(given)j(names\),)f(you)g(can)g(also)g(specify)150
2275 y(tokens)k(to)f(ignor)o(e,)f(marked)g(by)h(the)g
Fj(ignore)f Fi(keywor)o(d.)25 b(In)c(this)g(parser)f(we)h(want)g(to)g
(ignor)o(e)g(whitespace.)275 2374 y(The)29 b(T)-5 b(inyEnglish)32
b(grammar)d(shows)i(how)f(you)g(de\002ne)g(tokens)g(and)f(r)o(ules,)j
(but)e(it)f(does)h(not)g(specify)150 2474 y(what)20 b(should)h(happen)f
(once)h(we've)f(matched)g(the)g(r)o(ules.)26 b(In)20
b(the)g(next)h(example,)e(we)h(will)h(take)f(a)g(grammar)150
2574 y(and)g(pr)o(oduce)g(a)g Fg(parse)h(tr)o(ee)g Fi(fr)o(om)f(it.)150
2816 y Fe(2.2)p 0 0 0.3 TeXcolorrgb 99 w(Lisp)25 b(Expressions)p
Black 150 2974 a Fi(Lisp)17 b(syntax,)h(although)g(hated)f(by)g(many)-9
b(,)18 b(has)g(a)e(r)o(edeeming)h(quality:)24 b(it)18
b(is)g(simple)f(to)h(parse.)24 b(In)17 b(this)h(section)150
3074 y(we)i(will)g(constr)o(uct)h(a)e(Y)-8 b(apps)20
b(grammar)f(to)h(parse)f(Lisp)g(expr)o(essions)h(and)f(pr)o(oduce)g(a)g
(parse)g(tr)o(ee)f(as)i(output.)150 3300 y Ff(De\002ning)f(the)h
(Grammar)150 3458 y Fi(The)32 b(syntax)g(of)g(Lisp)f(is)i(simple.)59
b(It)32 b(has)f(expr)o(essions,)k(which)e(ar)o(e)d(identi\002ers,)k
(strings,)i(numbers,)e(and)150 3558 y(lists.)43 b(A)26
b(list)h(is)g(a)f(left)g(par)o(enthesis)g(followed)g(by)h(some)g
(number)f(of)h(expr)o(essions)f(\(separated)e(by)j(spaces\))150
3658 y(followed)c(by)h(a)e(right)i(par)o(enthesis.)31
b(For)24 b(example,)e Fj(5)p Fi(,)i Fj("ni")p Fi(,)e(and)h
Fj(\(print)49 b("1+2)g(=)g(")h(\(+)f(1)h(2\)\))22 b Fi(ar)o(e)150
3757 y(Lisp)f(expr)o(essions.)k(W)-6 b(ritten)21 b(as)f(a)h(grammar)-6
b(,)p Black Black 349 3940 a Fj(expr:)149 b(ID)49 b(|)h(STR)f(|)h(NUM)f
(|)h(list)349 4039 y(list:)149 b(\()49 b(expr*)g(\))275
4222 y Fi(In)32 b(addition)f(to)i(having)f(a)f(grammar)-6
b(,)33 b(we)f(need)g(to)g(specify)f(what)h(to)g(do)g(every)f(time)h
(something)i(is)150 4322 y(matched.)25 b(For)19 b(the)g(tokens,)i
(which)f(ar)o(e)e(strings,)i(we)f(just)h(want)f(to)h(get)f(the)h
(\223value\224)d(of)j(the)f(token,)h(attach)f(its)150
4421 y(type)j(\(identi\002er)-6 b(,)21 b(string,)h(or)g(number\))g(in)g
(some)h(way)-9 b(,)21 b(and)h(r)o(eturn)f(it.)29 b(For)22
b(the)g(lists,)g(we)g(want)g(to)g(constr)o(uct)150 4521
y(and)e(r)o(eturn)g(a)h(Python)h(list.)275 4621 y(Once)33
b(some)g(pattern)f(is)h(matched,)i(we)e(enclose)g(a)g(r)o(eturn)f
(statement)h(enclosed)f(in)i Fj({{...}})p Fi(.)60 b(The)150
4720 y(braces)27 b(allow)h(us)g(to)h(insert)f(any)g(one-line)g
(statement)g(into)g(the)g(parser)-6 b(.)46 b(W)-5 b(ithin)29
b(this)g(statement,)g(we)f(can)150 4820 y(r)o(efer)18
b(to)i(the)g(values)f(r)o(eturned)g(by)g(matching)i(each)e(part)g(of)h
(the)f(r)o(ule.)26 b(After)18 b(matching)j(a)e(token)h(such)g(as)g
Fj(ID)p Fi(,)150 4920 y(\223ID\224)g(will)h(be)g(bound)g(to)g(the)g
(text)g(of)f(the)h(matched)g(token.)26 b(Let's)20 b(take)g(a)h(look)g
(at)g(the)g(r)o(ule:)p Black Black 349 5102 a Fj(rule)49
b(expr:)g(ID)149 b({{)50 b(return)e(\('id',)h(ID\))g(}})449
5202 y(...)p Black 1899 5482 a Fi(3)p Black eop
%%Page: 4 4
4 3 bop Black Black 275 216 a Fi(In)20 b(a)f(r)o(ule,)h(tokens)h(r)o
(eturn)e(the)i(text)e(that)h(was)g(matched.)25 b(For)20
b(identi\002ers,)g(we)g(just)h(r)o(eturn)e(the)h(identi\002er)-6
b(,)150 315 y(along)22 b(with)g(a)e(\223tag\224)g(telling)i(us)g(that)f
(this)h(is)f(an)g(identi\002er)g(and)g(not)h(a)f(string)h(or)f(some)h
(other)f(value.)26 b(Some-)150 415 y(times)g(we)g(may)g(need)f(to)i
(convert)f(this)g(text)g(to)g(a)f(dif)o(fer)o(ent)f(form.)41
b(For)26 b(example,)g(if)g(a)f(string)h(is)h(matched,)150
515 y(we)21 b(want)g(to)h(r)o(emove)e(quotes)i(and)f(handle)g(special)g
(forms)g(like)g Fj(\\n)p Fi(.)27 b(If)20 b(a)h(number)g(is)h(matched,)e
(we)h(want)h(to)150 614 y(convert)f(it)g(into)g(a)g(number)-6
b(.)25 b(Let's)c(look)g(at)g(the)g(r)o(eturn)f(values)g(for)h(the)g
(other)g(tokens:)p Black Black 449 792 a Fj(...)798 891
y(|)49 b(STR)99 b({{)50 b(return)e(\('str',)h(eval\(STR\)\))f(}})798
991 y(|)h(NUM)99 b({{)50 b(return)e(\('num',)h(atoi\(NUM\)\))f(}})449
1090 y(...)275 1268 y Fi(If)22 b(we)h(get)g(a)g(string,)h(we)f(want)g
(to)h(r)o(emove)e(the)h(quotes)h(and)f(pr)o(ocess)g(any)g(special)f
(backslash)h(codes,)g(so)150 1367 y(we)d(r)o(un)h Fj(eval)e
Fi(on)i(the)f(quoted)h(string.)26 b(If)20 b(we)g(get)g(a)g(number)-6
b(,)20 b(we)g(convert)g(it)g(to)h(an)f(integer)g(with)h
Fj(atoi)e Fi(and)150 1467 y(then)i(r)o(eturn)f(the)h(number)g(along)g
(with)h(its)f(type)g(tag.)275 1566 y(For)j(matching)h(a)f(list,)h(we)f
(need)g(to)h(do)f(something)i(slightly)f(mor)o(e)f(complicated.)36
b(If)24 b(we)g(match)g(a)g(Lisp)150 1666 y(list)d(of)g(expr)o(essions,)
g(we)f(want)h(to)g(cr)o(eate)e(a)i(Python)h(list)f(with)h(those)f
(values.)p Black Black 349 1843 a Fj(rule)49 b(list:)g("\\\\\(")846
b(#)50 b(Match)f(the)g(opening)f(parenthesis)897 1943
y({{)i(result)e(=)i([])f(}})249 b(#)50 b(Create)e(a)i(Python)f(list)897
2042 y(\()1047 2142 y(expr)746 b(#)50 b(When)f(we)g(match)g(an)h
(expression,)1047 2242 y({{)f(result.append\(expr\))d(}})149
b(#)50 b(add)f(it)h(to)f(the)g(list)897 2341 y(\)*)996
b(#)50 b(*)f(means)g(repeat)g(this)g(if)g(needed)897
2441 y("\\\\\)")846 b(#)50 b(Match)f(the)g(closing)f(parenthesis)897
2541 y({{)i(return)e(result)h(}})149 b(#)50 b(Return)e(the)i(Python)e
(list)275 2718 y Fi(In)21 b(this)g(r)o(ule)g(we)g(\002rst)g(match)g
(the)g(opening)h(par)o(enthesis,)e(then)h(go)g(into)h(a)e(loop.)27
b(In)21 b(this)h(loop)f(we)g(match)150 2817 y(expr)o(essions)e(and)f
(add)f(them)i(to)g(the)g(list.)25 b(When)19 b(ther)o(e)f(ar)o(e)f(no)i
(mor)o(e)f(expr)o(essions)h(to)g(match,)g(we)f(match)h(the)150
2917 y(closing)j(par)o(enthesis)e(and)h(r)o(eturn)f(the)g(r)o
(esulting.)26 b(Note)21 b(that)g Fj(#)f Fi(is)h(used)g(for)f(comments,)
i(just)g(as)e(in)h(Python.)275 3017 y(The)f(complete)h(grammar)f(is)h
(speci\002ed)g(as)f(follows:)p Black Black 150 3178 a
Fj(parser)49 b(Lisp:)349 3278 y(ignore:)298 b('\\\\s+')349
3378 y(token)49 b(NUM:)149 b('[0-9]+')349 3477 y(token)49
b(ID:)199 b('[-+*/!@\045\210&=.a-zA-Z0-9_]+')349 3577
y(token)49 b(STR:)149 b('"\([\210\\\\"]+|\\\\\\\\.\)*"')349
3776 y(rule)49 b(expr:)149 b(ID)249 b({{)49 b(return)g(\('id',)f(ID\))i
(}})897 3876 y(|)g(STR)199 b({{)49 b(return)g(\('str',)f(eval\(STR\)\))
g(}})897 3975 y(|)i(NUM)199 b({{)49 b(return)g(\('num',)f
(atoi\(NUM\)\))g(}})897 4075 y(|)i(list)149 b({{)49 b(return)g(list)g
(}})349 4175 y(rule)g(list:)g("\\\\\(")199 b({{)49 b(result)g(=)g([])h
(}})897 4274 y(\()g(expr)149 b({{)49 b(result.append\(expr\))d(}})897
4374 y(\)*)897 4473 y("\\\\\)")199 b({{)49 b(return)g(result)f(}})275
4635 y Fi(One)27 b(thing)h(you)g(may)f(have)g(noticed)g(is)g(that)g
Fj("\\\\\(")g Fi(and)f Fj("\\\\\)")h Fi(appear)e(in)j(the)f
Fj(list)f Fi(r)o(ule.)45 b(These)150 4735 y(ar)o(e)22
b Fg(inline)j(tokens)p Fi(:)31 b(they)24 b(appear)e(in)j(the)f(r)o
(ules)g(without)h(being)f(given)g(a)f(name)g(with)i(the)f
Fj(token)f Fi(keywor)o(d.)150 4834 y(Inline)32 b(tokens)h(ar)o(e)e(mor)
o(e)g(convenient)i(to)f(use,)i(but)e(since)g(they)g(do)g(not)h(have)e
(a)g(name,)j(the)e(text)g(that)g(is)150 4934 y(matched)19
b(cannot)g(be)g(used)g(in)g(the)g(r)o(eturn)g(value.)24
b(They)19 b(ar)o(e)f(best)h(used)f(for)h(short)h(simple)f(patterns)g
(\(usually)150 5034 y(punctuation)i(or)g(keywor)o(ds\).)275
5133 y(Another)h(thing)i(to)f(notice)h(is)f(that)g(the)g(number)f(and)h
(identi\002er)g(tokens)g(overlap.)31 b(For)23 b(example,)f(\223487\224)
150 5233 y(matches)i(both)g(NUM)f(and)h(ID.)g(In)g(Y)-8
b(apps,)24 b(the)g(scanner)g(only)h(tries)f(to)g(match)g(tokens)g(that)
g(ar)o(e)f(acceptable)p Black 1899 5482 a(4)p Black eop
%%Page: 5 5
5 4 bop Black Black 150 216 a Fi(to)20 b(the)f(parser)-6
b(.)24 b(This)19 b(r)o(ule)g(doesn't)h(help)f(her)o(e,)g(since)g(both)h
(NUM)e(and)h(ID)g(can)g(appear)e(in)j(the)f(same)g(place)g(in)150
315 y(the)24 b(grammar)-6 b(.)32 b(Ther)o(e)23 b(ar)o(e)f(two)i(r)o
(ules)f(used)g(to)h(pick)g(tokens)g(if)f(mor)o(e)g(than)h(one)g
(matches.)33 b(One)24 b(is)g(that)f(the)150 415 y Fg(longest)f
Fi(match)f(is)h(pr)o(eferr)o(ed.)j(For)d(example,)f(\223487x\224)e
(will)k(match)e(as)h(an)f(ID)h(\(487x\))e(rather)g(than)i(as)g(a)f(NUM)
150 515 y(\(487\))i(followed)j(by)f(an)h(ID)f(\(x\).)39
b(The)25 b(second)h(r)o(ule)g(is)f(that)h(if)f(the)g(two)i(matches)e
(ar)o(e)f(the)i(same)f(length,)i(the)150 614 y Fg(\002rst)18
b Fi(one)h(listed)g(in)f(the)h(grammar)f(is)g(pr)o(eferr)o(ed.)k(For)c
(example,)g(\223487\224)e(will)j(match)g(as)f(an)g(NUM)f(rather)h(than)
150 714 y(an)j(ID)h(because)e(NUM)h(is)h(listed)f(\002rst)h(in)g(the)g
(grammar)-6 b(.)26 b(Inline)c(tokens)h(have)e(pr)o(efer)o(ence)d(over)k
(any)f(tokens)150 814 y(you)g(have)g(listed.)275 913
y(Now)27 b(that)f(our)h(grammar)f(is)h(de\002ned,)g(we)g(can)f(r)o(un)h
(Y)-8 b(apps)27 b(to)g(pr)o(oduce)e(a)h(parser)-6 b(,)27
b(and)f(then)h(r)o(un)g(the)150 1013 y(parser)20 b(to)h(pr)o(oduce)f(a)
g(parse)g(tr)o(ee.)150 1238 y Ff(Running)f(Y)-6 b(apps)150
1396 y Fi(In)29 b(the)f(Y)-8 b(apps)28 b(module)h(is)f(a)g(function)h
Fj(generate)e Fi(that)h(takes)g(an)g(input)h(\002lename)f(and)g(writes)
g(a)g(parser)150 1495 y(to)f(another)f(\002le.)42 b(W)-8
b(e)26 b(can)g(use)g(this)h(function)g(to)g(generate)e(the)h(Lisp)g
(parser)-6 b(,)27 b(which)g(is)f(assumed)g(to)h(be)f(in)150
1595 y Fj(lisp.g)p Fi(.)p Black Black 150 1769 a Fj(\045)50
b(python)150 1869 y(Python)f(1.5.1)g(\(#1,)g(Sep)99 b(3)49
b(1998,)g(22:51:17\))98 b([GCC)49 b(2.7.2.3])g(on)g(linux-i386)150
1969 y(Copyright)f(1991-1995)g(Stichting)g(Mathematisch)g(Centrum,)g
(Amsterdam)150 2068 y(>>>)h(import)g(yapps)150 2168 y(>>>)g
(yapps.generate\('lisp.g'\))275 2342 y Fi(At)25 b(this)h(point,)h(Y)-8
b(apps)26 b(has)g(written)g(a)f(\002le)h Fj(lisp.py)e
Fi(that)h(contains)i(the)e(parser)-6 b(.)39 b(In)26 b(that)f(\002le)h
(ar)o(e)e(two)150 2442 y(classes)g(\(one)f(scanner)h(and)f(one)h
(parser\))f(and)g(a)g(function)i(\(called)d Fj(parse)p
Fi(\))h(that)g(puts)h(things)h(together)f(for)150 2542
y(you.)275 2641 y(Alternatively)-9 b(,)19 b(we)i(can)f(r)o(un)i(Y)-8
b(apps)21 b(fr)o(om)f(the)h(command)g(line)g(to)g(generate)f(the)h
(parser)f(\002le:)p Black Black 150 2816 a Fj(\045)50
b(python)e(yapps.py)h(lisp.g)275 2990 y Fi(After)27 b(r)o(unning)j(Y)-8
b(apps)29 b(either)g(fr)o(om)f(within)i(Python)g(or)f(fr)o(om)f(the)h
(command)g(line,)i(we)e(can)f(use)h(the)150 3090 y(Lisp)g(parser)f(by)h
(calling)h(the)f Fj(parse)f Fi(function.)51 b(The)29
b(\002rst)h(parameter)d(should)j(be)f(the)g(r)o(ule)g(we)g(want)h(to)
150 3189 y(match,)21 b(and)f(the)h(second)g(parameter)e(should)i(be)g
(the)g(string)g(to)g(parse.)p Black Black 150 3364 a
Fj(>>>)49 b(import)g(lisp)150 3464 y(>>>)g(lisp.parse\('expr',)e('\(+)i
(3)h(4\)'\))150 3563 y([\('id',)f('+'\),)f(\('num',)h(3\),)g(\('num',)g
(4\)])150 3663 y(>>>)g(lisp.parse\('expr',)e('\(print)h("3)i(=)f(")h
(\(+)f(1)h(2\)\)'\))150 3762 y([\('id',)f('print'\),)f(\('str',)g('3)i
(=)f('\),)g([\('id',)g('+'\),)g(\('num',)f(1\),)i(\('num',)e(2\)]])275
3937 y Fi(The)22 b Fj(parse)f Fi(function)i(is)f(not)h(the)f(only)h
(way)f(to)h(use)f(the)g(parser;)g(section)h(5.1)e(describes)g(how)i(to)
g(access)150 4037 y(parser)d(objects)h(dir)o(ectly)-9
b(.)275 4136 y(W)h(e've)24 b(now)h(gone)g(thr)o(ough)f(the)h(steps)f
(in)h(cr)o(eating)e(a)h(grammar)-6 b(,)24 b(writing)h(a)f(grammar)g
(\002le)g(for)g(Y)-8 b(apps,)150 4236 y(pr)o(oducing)26
b(a)g(parser)-6 b(,)26 b(and)g(using)h(the)f(parser)-6
b(.)41 b(In)26 b(the)h(next)f(example)f(we'll)i(see)f(how)h(r)o(ules)f
(can)g(take)g(pa-)150 4335 y(rameters)20 b(and)g(also)h(how)h(to)f(do)g
(computations)h(instead)e(of)h(just)g(r)o(eturning)g(a)f(parse)g(tr)o
(ee.)150 4577 y Fe(2.3)p 0 0 0.3 TeXcolorrgb 99 w(Calculator)p
Black 150 4735 a Fi(A)d(common)j(example)d(parser)f(given)j(in)f(many)g
(textbooks)g(is)h(that)e(for)h(simple)g(expr)o(essions,)g(with)h
(numbers,)150 4834 y(addition,)37 b(subtraction,)h(multiplication,)h
(division,)f(and)c(par)o(enthesization)f(of)h(subexpr)o(essions.)66
b(W)-8 b(e'll)150 4934 y(write)21 b(this)g(example)f(in)i(Y)-8
b(apps,)20 b(evaluating)h(the)g(expr)o(ession)f(as)h(we)f(parse.)275
5034 y(Unlike)25 b Fj(yacc)p Fi(,)g(Y)-8 b(apps)26 b(does)f(not)h(have)
e(any)h(way)h(to)f(specify)g(pr)o(ecedence)e(r)o(ules,)j(so)g(we)f
(have)g(to)h(do)f(it)150 5133 y(ourselves.)g(W)-8 b(e)19
b(say)g(that)g(an)g(expr)o(ession)f(is)i(the)f(sum)g(of)g(terms,)h(and)
e(that)h(a)f(term)h(is)h(the)f(pr)o(oduct)f(of)h(factors,)150
5233 y(and)h(that)h(a)f(factor)g(is)h(a)g(number)g(or)f(a)h(par)o
(enthesized)e(expr)o(ession:)p Black 1899 5482 a(5)p
Black eop
%%Page: 6 6
6 5 bop Black Black Black Black 349 216 a Fj(expr:)547
b(factor)49 b(\()h(\("+"|"-"\))e(factor)g(\)*)349 315
y(factor:)447 b(term)149 b(\()50 b(\("*"|"/"\))e(term)h(\)*)349
415 y(term:)547 b(NUM)50 b(|)f("\(")g(expr)g("\)")275
598 y Fi(In)30 b(or)o(der)f(to)h(evaluate)f(the)h(expr)o(ession)g(as)g
(we)g(go,)i(we)e(should)h(keep)f(along)g(an)g(accumulator)f(while)150
697 y(evaluating)20 b(the)h(lists)g(of)f(terms)h(or)g(factors.)j(Just)d
(as)f(we)g(kept)h(a)f(\223r)o(esult\224)f(variable)g(to)i(build)f(a)g
(parse)g(tr)o(ee)f(for)150 797 y(Lisp)24 b(expr)o(essions,)h(we)f(will)
h(use)f(a)g(variable)f(to)h(evaluate)f(numerical)h(expr)o(essions.)36
b(The)24 b(full)g(grammar)g(is)150 897 y(given)d(below:)p
Black Black 150 1079 a Fj(parser)49 b(Calculator:)349
1179 y(token)g(END:)g("$")448 b(#)50 b($)f(means)g(end)g(of)h(string)
349 1279 y(token)f(NUM:)g("[0-9]+")349 1478 y(rule)g(goal:)547
b(expr)49 b(END)448 b({{)50 b(return)e(expr)h(}})349
1677 y(#)h(An)f(expression)f(is)i(the)f(sum)g(and)g(difference)f(of)i
(factors)349 1777 y(rule)f(expr:)547 b(factor)g({{)50
b(v)f(=)h(factor)f(}})1296 1876 y(\()g("[+]")g(factor)348
b({{)49 b(v)h(=)f(v+factor)g(}})1296 1976 y(|)99 b("-")g(factor)348
b({{)49 b(v)h(=)f(v-factor)g(}})1296 2076 y(\)*)846 b({{)50
b(return)e(v)i(}})349 2275 y(#)g(A)g(factor)e(is)i(the)f(product)f(and)
i(division)e(of)h(terms)349 2374 y(rule)g(factor:)447
b(term)647 b({{)50 b(v)f(=)h(term)f(}})1296 2474 y(\()g("[*]")g(term)
448 b({{)49 b(v)h(=)f(v*term)g(}})1296 2574 y(|)99 b("/")g(term)448
b({{)49 b(v)h(=)f(v/term)g(}})1296 2673 y(\)*)846 b({{)50
b(return)e(v)i(}})349 2873 y(#)g(A)g(term)f(is)g(either)g(a)g(number)g
(or)g(an)h(expression)e(surrounded)g(by)h(parentheses)349
2972 y(rule)g(term:)547 b(NUM)697 b({{)50 b(return)e(atoi\(NUM\))g(}})
1296 3072 y(|)h("\\\\\(")g(expr)g("\\\\\)")g({{)h(return)e(expr)h(}})
275 3254 y Fi(The)27 b(top-level)g(r)o(ule)g(is)g Fg(goal)p
Fi(,)h(which)g(says)f(that)h(we)f(ar)o(e)e(looking)k(for)e(an)g(expr)o
(ession)g(followed)h(by)f(the)150 3354 y(end)21 b(of)g(the)g(string.)27
b(The)21 b Fj(END)g Fi(token)g(is)h(needed)e(because)g(without)i(it,)f
(it)h(isn't)f(clear)g(when)g(to)h(stop)f(parsing.)150
3454 y(For)g(example,)e(the)i(string)g(\2231+3\224)e(could)i(be)f
(parsed)f(either)i(as)f(the)h(expr)o(ession)f(\2231\224)f(followed)i
(by)g(the)f(string)150 3553 y(\223+3\224)f(or)g(it)h(could)g(be)f
(parsed)g(as)g(the)h(expr)o(ession)f(\2231+3\224.)24
b(By)c(r)o(equiring)f(expr)o(essions)h(to)g(end)g(with)g
Fj(END)p Fi(,)f(the)150 3653 y(parser)h(is)h(for)o(ced)e(to)i(take)g
(\2231+3\224.)275 3753 y(In)f(the)g(two)g(r)o(ules)h(with)f(r)o
(epetition,)g(the)g(accumulator)f(is)i(named)e Fj(v)p
Fi(.)25 b(After)19 b(r)o(eading)g(in)h(one)g(expr)o(ession,)150
3852 y(we)e(initialize)g(the)g(accumulator)-6 b(.)24
b(Each)17 b(time)h(thr)o(ough)h(the)f(loop,)h(we)f(modify)g(the)g
(accumulator)g(by)g(adding,)150 3952 y(subtracting,)g(multiplying)h(by)
-9 b(,)18 b(or)g(dividing)g(the)g(pr)o(evious)f(accumulator)g(by)h(the)
g(expr)o(ession)f(that)h(has)f(been)150 4051 y(parsed.)24
b(At)d(the)g(end)f(of)h(the)g(r)o(ule,)g(we)f(r)o(eturn)g(the)h
(accumulator)-6 b(.)275 4151 y(The)21 b(calculator)g(example)g(shows)i
(how)f(to)g(pr)o(ocess)g(lists)g(of)g(elements)f(using)i(loops,)f(as)g
(well)g(as)f(how)i(to)150 4251 y(handle)e(pr)o(ecedence)d(of)j
(operators.)275 4350 y Fg(Note:)35 b Fi(It's)26 b(often)g(important)h
(to)f(put)g(the)g Fj(END)g Fi(token)h(in,)g(so)g(put)f(it)g(in)g
(unless)h(you)g(ar)o(e)d(sur)o(e)i(that)g(your)150 4450
y(grammar)20 b(has)h(some)g(other)g(non-ambiguous)h(token)g(marking)f
(the)g(end)f(of)h(the)g(pr)o(ogram.)150 4693 y Fe(2.4)p
0 0 0.3 TeXcolorrgb 99 w(Calculator)k(with)h(Memory)p
Black 150 4851 a Fi(In)i(the)g(pr)o(evious)g(example)f(we)h(learned)f
(how)i(to)f(write)g(a)g(calculator)f(that)h(evaluates)f(simple)h
(numerical)150 4950 y(expr)o(essions.)d(In)18 b(this)h(section)f(we)g
(will)h(extend)f(the)g(example)f(to)i(support)f(both)g(local)g(and)g
(global)g(variables.)275 5050 y(T)-8 b(o)21 b(support)g(global)g
(variables,)e(we)i(will)h(add)d(assignment)j(statements)f(to)g(the)g
(\223goal\224)f(r)o(ule.)p Black Black 349 5233 a Fj(rule)49
b(goal:)547 b(expr)49 b(END)448 b({{)50 b(return)e(expr)h(}})p
Black 1899 5482 a Fi(6)p Black eop
%%Page: 7 7
7 6 bop Black Black 847 216 a Fj(|)50 b('set')f(ID)g(expr)g(END)448
b({{)50 b(global_vars[ID])d(=)i(expr)g(}})2242 315 y({{)h(return)e
(expr)h(}})275 482 y Fi(T)-8 b(o)21 b(use)g(these)g(variables,)e(we)i
(need)f(a)g(new)h(kind)h(of)e(terminal:)p Black Black
349 648 a Fj(rule)49 b(term:)g(...)g(|)h(ID)g({{)f(return)g
(global_vars[ID])e(}})275 814 y Fi(So)23 b(far)-6 b(,)22
b(these)i(changes)f(ar)o(e)f(straightforwar)o(d.)32 b(W)-8
b(e)24 b(simply)g(have)f(a)g(global)h(dictionary)f Fj(global)p
3467 814 25 4 v 29 w(vars)150 914 y Fi(that)d(stor)o(es)g(the)g
(variables)f(and)g(values,)h(we)f(modify)i(it)f(when)g(ther)o(e)g(is)g
(an)g(assignment)h(statement,)f(and)f(we)150 1014 y(look)j(up)e
(variables)g(in)h(it)g(when)h(we)e(see)h(a)f(variable)g(name.)275
1113 y(T)-8 b(o)19 b(support)h(local)f(variables,)f(we)h(will)h(add)e
(variable)g(declarations)h(to)g(the)h(set)f(of)g(allowed)g(expr)o
(essions.)p Black Black 349 1279 a Fj(rule)49 b(term:)g(...)g(|)h
('let')f(VAR)g('=')g(expr)h('in')f(expr)g(...)275 1446
y Fi(This)25 b(is)g(wher)o(e)f(it)h(becomes)g(tricky)-9
b(.)37 b(Local)25 b(variables)e(should)j(be)e(stor)o(ed)g(in)i(a)e
(local)h(dictionary)-9 b(,)25 b(not)h(in)150 1545 y(the)h(global)f
(one.)43 b(One)27 b(trick)f(would)h(be)g(to)f(save)g(a)g(copy)h(of)f
(the)h(global)f(dictionary)-9 b(,)28 b(modify)f(it,)h(and)e(then)150
1645 y(r)o(estor)o(e)21 b(it)i(later)-6 b(.)30 b(In)23
b(this)g(example)f(we)g(will)i(instead)e(use)g Fg(attributes)h
Fi(to)g(cr)o(eate)e(local)i(information)g(and)f(pass)150
1745 y(it)f(to)g(subr)o(ules.)275 1844 y(A)e(r)o(ule)i(can)f
(optionally)h(take)f(parameters.)k(When)d(we)f(invoke)h(the)f(r)o(ule,)
g(we)h(must)g(pass)f(in)h(ar)o(guments.)150 1944 y(For)g(local)g
(variables,)e(let's)i(use)g(a)f(single)i(parameter)-6
b(,)19 b Fj(local)p 2147 1944 V 29 w(vars)p Fi(:)p Black
Black 349 2110 a Fj(rule)49 b(expr<<local_vars>>:)146
b(...)349 2210 y(rule)49 b(factor<<local_vars>>:)d(...)349
2309 y(rule)j(term<<local_vars>>:)146 b(...)275 2476
y Fi(Each)24 b(time)h(we)f(want)h(to)g(match)g Fj(expr)p
Fi(,)f Fj(factor)p Fi(,)h(or)f Fj(term)p Fi(,)h(we)g(will)g(pass)g(the)
f(local)h(variables)f(in)h(the)150 2575 y(curr)o(ent)19
b(r)o(ule)h(to)h(the)f(subr)o(ule.)26 b(One)20 b(inter)o(esting)g(case)
g(is)g(when)h(we)f(pass)g(as)f(an)h(ar)o(gument)g(something)h
Fg(other)150 2675 y Fi(than)g Fj(local)p 591 2675 V 29
w(vars)p Fi(:)p Black Black 299 2841 a Fj(rule)50 b
(term<<local_vars>>:)c(...)947 2941 y(|)k('let')f(VAR)g('=')g
(expr<<local_vars>>)1047 3040 y({{)g(local_vars)f(=)i([\(VAR,)e
(expr\)])h(+)h(local_vars)e(}})1047 3140 y('in')h(expr<<local_vars>>)
1047 3240 y({{)g(return)g(expr)g(}})275 3406 y Fi(Note)26
b(that)h(the)g(assignment)h(to)f(the)g(local)f(variables)g(list)h(does)
g(not)g(modify)g(the)g(original)g(list.)44 b(This)28
b(is)150 3506 y(important)21 b(to)g(keep)g(local)f(variables)g(fr)o(om)
g(being)i(seen)e(outside)h(the)g(\223let\224.)275 3605
y(The)f(other)h(inter)o(esting)g(case)f(is)i(when)f(we)g(\002nd)g(a)f
(variable:)p Black Black 150 3771 a Fj(global_vars)48
b(=)h({})150 3971 y(def)g(lookup\(map,)f(name\):)349
4070 y(for)i(x,v)f(in)g(map:)99 b(if)50 b(x==name:)e(return)h(v)349
4170 y(return)g(global_vars[name])150 4270 y(\045\045)299
4369 y(...)299 4469 y(rule)h(term<<local_vars>:)c(...)947
4568 y(|)k(VAR)f({{)g(return)g(lookup\(local_vars,)d(VAR\))k(}})275
4735 y Fi(The)22 b(lookup)i(function)f(will)h(sear)o(ch)d(thr)o(ough)i
(the)g(local)g(variable)e(list,)j(and)e(if)g(it)h(cannot)g(\002nd)g
(the)g(name)150 4834 y(ther)o(e,)d(it)h(will)g(look)h(it)f(up)g(in)g
(the)g(global)g(variable)e(dictionary)-9 b(.)275 4934
y(A)25 b(complete)i(grammar)f(for)g(this)h(example,)g(including)g(a)f
(r)o(ead-eval-print)d(loop)28 b(for)e(interacting)g(with)150
5034 y(the)21 b(calculator)-6 b(,)20 b(can)g(be)g(found)h(in)h(the)e
(examples)h(subdir)o(ectory)f(included)g(with)i(Y)-8
b(apps.)275 5133 y(In)20 b(this)h(section)g(we)f(saw)g(how)h(to)f
(insert)h(code)f(befor)o(e)f(the)h(parser)-6 b(.)24 b(W)-8
b(e)20 b(also)h(saw)f(how)h(to)f(use)g(attributes)150
5233 y(to)h(transmit)g(local)g(information)h(fr)o(om)e(one)h(r)o(ule)g
(to)g(its)g(subr)o(ules.)p Black 1899 5482 a(7)p Black
eop
%%Page: 8 8
8 7 bop Black Black 150 217 a Fh(3)p 0 0 0.6 TeXcolorrgb
119 w(Grammars)p Black 150 406 a Fi(Each)30 b(Y)-8 b(apps)30
b(grammar)g(has)g(a)g(name,)j(a)d(list)h(of)f(tokens,)j(and)d(a)g(set)g
(of)h(pr)o(oduction)f(r)o(ules.)55 b(A)30 b(grammar)150
505 y(named)i Fj(X)f Fi(will)i(be)f(used)f(to)i(pr)o(oduce)d(a)i
(parser)f(named)g Fj(X)h Fi(and)g(a)f(scanner)h(anmed)f
Fj(XScanner)p Fi(.)58 b(As)32 b(in)150 605 y(Python,)19
b(names)e(ar)o(e)e(case)h(sensitive,)i(start)e(with)i(a)e(letter)-6
b(,)17 b(and)f(contain)i(letters,)f(numbers,)g(and)g(underscor)o(es)150
705 y(\()p 183 705 25 4 v 30 w(\).)275 804 y(Ther)o(e)k(ar)o(e)g(thr)o
(ee)h(kinds)h(of)f(tokens)h(in)g(Y)-8 b(apps:)29 b(named,)23
b(inline,)g(and)f(ignor)o(ed.)30 b(As)23 b(their)f(name)h(implies,)150
904 y(named)32 b(tokens)i(ar)o(e)d(given)i(a)f(name,)k(using)d(the)g
(token)g(constr)o(uct:)51 b Fj(token)d Fb(name)i Fj(:)99
b Fb(regexp)p Fi(.)61 b(In)32 b(a)150 1004 y(r)o(ule,)23
b(the)g(token)g(can)f(be)g(matched)g(by)h(using)h(the)e(name.)31
b(Inline)23 b(tokens)h(ar)o(e)d(r)o(egular)g(expr)o(essions)i(that)f
(ar)o(e)150 1103 y(used)29 b(in)h(r)o(ules)g(without)h(being)f(declar)o
(ed.)50 b(Ignor)o(ed)29 b(tokens)h(ar)o(e)e(declar)o(ed)g(using)i(the)g
(ignor)o(e)f(constr)o(uct:)150 1203 y Fj(ignore:)98 b
Fb(regexp)p Fi(.)48 b(These)29 b(tokens)g(ar)o(e)e(ignor)o(ed)i(by)f
(the)h(scanner)-6 b(,)30 b(and)e(ar)o(e)f(not)j(seen)e(by)h(the)f
(parser)-6 b(.)150 1302 y(Often)23 b(whitespace)f(is)i(an)e(ignor)o(ed)
h(token.)32 b(The)23 b(r)o(egular)f(expr)o(essions)g(used)h(to)g
(de\002ne)g(tokens)g(should)h(use)150 1402 y(the)d(syntax)g(de\002ned)f
(in)h(the)g Fj(re)g Fi(module,)f(so)i(some)f(symbols)h(may)f(have)f(to)
h(be)g(backslashed.)275 1502 y(Pr)o(oduction)j(r)o(ules)h(in)h(Y)-8
b(apps)24 b(have)h(a)f(name)g(and)g(a)h(pattern)f(to)h(match.)37
b(If)24 b(the)h(r)o(ule)g(is)g(parameterized,)150 1601
y(the)19 b(name)g(should)h(be)f(followed)g(by)g(a)g(list)h(of)f
(parameter)e(names)i(in)h Fj(<<...>>)p Fi(.)j(A)c(pattern)f(can)h(be)g
(a)g(simple)150 1701 y(pattern)f(or)i(a)e(compound)i(pattern.)k(Simple)
19 b(patterns)g(ar)o(e)e(the)i(name)g(of)g(a)g(named)g(token,)g(a)g(r)o
(egular)f(expr)o(es-)150 1801 y(sion)k(in)f(quotes)h(\(inline)f
(token\),)g(the)f(name)h(of)g(a)f(pr)o(oduction)h(r)o(ule)f(\(followed)
h(by)g(ar)o(guments)f(in)i Fj(<<...>>)p Fi(,)150 1900
y(if)k(the)h(r)o(ule)g(has)g(parameters\),)f(and)g(single)h(line)g
(Python)h(statements)f(\()p Fj({{...}})p Fi(\).)41 b(Compound)27
b(patterns)150 2000 y(ar)o(e)18 b(sequences)h(\()p Fj(A)50
b(B)f(C)h(...)p Fi(\),)18 b(choices)i(\()f Fj(A)49 b(|)h(B)g(|)f(C)h(|)
f(...)p Fi(\),)19 b(options)h(\()p Fj([...])p Fi(\),)e(zer)o(o-or)o
(-mor)o(e)f(r)o(epe-)150 2099 y(titions)i(\()p Fj(...*)p
Fi(\),)f(and)f(one-or)o(-mor)o(e)g(r)o(epetitions)i(\()p
Fj(...+)p Fi(\).)k(Like)18 b(r)o(egular)f(expr)o(essions,)h(r)o
(epetition)g(operators)150 2199 y(have)i(a)h(higher)g(pr)o(ecedence)e
(than)i(sequences,)f(and)h(sequences)g(have)f(a)h(higher)g(pr)o
(ecedence)e(than)i(choices.)275 2299 y(Whenever)16 b
Fj({{...}})g Fi(is)h(used,)g(a)f(legal)h(one-line)g(Python)h(statement)
f(should)h(be)e(put)h(inside)g(the)g(braces.)150 2398
y(The)25 b(token)h Fj(}})f Fi(should)h(not)g(appear)e(within)i(the)g
Fj({{...}})e Fi(section,)j(even)e(within)h(a)f(string,)i(since)f(Y)-8
b(apps)150 2498 y(does)24 b(not)h(attempt)f(to)h(parse)f(the)g(Python)i
(statement.)36 b(A)24 b(workar)o(ound)g(for)g(strings)h(is)g(to)g(put)f
(two)h(strings)150 2598 y(together)36 b(\()p Fj("}")49
b("}")p Fi(\),)38 b(or)e(to)g(use)g(backslashes)f(\()p
Fj("}\\}")p Fi(\).)69 b(At)36 b(the)g(end)f(of)h(a)f(r)o(ule)h(you)g
(should)h(use)e(a)150 2697 y Fj({{)49 b(return)g(X)h(}})24
b Fi(statement)h(to)g(r)o(eturn)f(a)h(value.)36 b(However)-6
b(,)26 b(you)f(should)h Fg(not)e Fi(use)h(any)g(contr)o(ol)g(state-)150
2797 y(ments)h(\()p Fj(return)p Fi(,)e Fj(continue)p
Fi(,)g Fj(break)p Fi(\))g(in)h(the)g(middle)g(of)g(a)g(r)o(ule.)38
b(Y)-8 b(apps)25 b(needs)g(to)g(make)g(assumptions)150
2896 y(about)31 b(the)h(contr)o(ol)g(\003ow)h(to)f(generate)e(a)h
(parser)-6 b(,)33 b(and)e(any)h(changes)f(to)h(the)g(contr)o(ol)g
(\003ow)h(will)f(confuse)150 2996 y(Y)-8 b(apps.)275
3096 y(The)24 b Fj(<<...>>)e Fi(form)i(can)g(occur)g(in)g(two)h
(places:)31 b(to)25 b(de\002ne)f(parameters)e(to)j(a)e(r)o(ule)h(and)g
(to)g(give)g(ar)o(gu-)150 3195 y(ments)h(when)g(matching)h(a)e(r)o
(ule.)37 b(Parameters)23 b(use)i(the)g(syntax)f(used)h(for)f(Python)i
(functions,)g(so)f(they)g(can)150 3295 y(include)k(default)f(ar)o
(guments)h(and)g(the)g(special)f(forms)i(\()p Fj(*args)e
Fi(and)g Fj(**kwargs)p Fi(\).)49 b(Ar)o(guments)29 b(use)g(the)150
3395 y(syntax)24 b(for)f(Python)j(function)e(call)g(ar)o(guments,)g(so)
g(they)g(can)f(include)h(normal)g(ar)o(guments)g(and)f(keywor)o(d)150
3494 y(ar)o(guments.)i(The)c(token)g Fj(>>)g Fi(should)g(not)h(appear)d
(within)j(the)f Fj(<<...>>)e Fi(section.)275 3594 y(In)k(both)h(the)f
(statements)g(and)g(r)o(ule)g(ar)o(guments,)g(you)g(can)g(use)g(names)g
(de\002ned)g(by)g(the)g(parser)f(to)i(r)o(efer)150 3693
y(to)30 b(matched)g(patterns.)53 b(Y)-8 b(ou)31 b(can)e(r)o(efer)g(to)h
(the)g(text)g(matched)g(by)g(a)f(named)h(token)g(by)g(using)h(the)f
(token)150 3793 y(name.)38 b(Y)-8 b(ou)26 b(can)f(use)g(the)g(value)f
(r)o(eturned)g(by)h(a)f(pr)o(oduction)h(r)o(ule)g(by)g(using)h(the)f
(name)g(of)g(that)g(r)o(ule.)38 b(If)24 b(a)150 3893
y(name)c Fj(X)g Fi(is)g(matched)f(mor)o(e)h(than)g(once)g(\(such)g(as)g
(in)g(loops\),)h(you)f(will)h(have)e(to)h(save)g(the)g(earlier)f
(value\(s\))g(in)150 3992 y(a)j(temporary)f(variable,)g(and)h(then)h
(use)f(that)g(temporary)g(variable)f(in)h(the)h(r)o(eturn)e(value.)29
b(The)22 b(next)g(section)150 4092 y(has)f(an)f(example)g(of)h(a)f
(name)h(that)g(occurs)g(mor)o(e)f(than)h(once.)150 4335
y Fe(3.1)p 0 0 0.3 TeXcolorrgb 99 w(Left)k(Factoring)p
Black 150 4493 a Fi(Y)-8 b(apps)22 b(pr)o(oduces)g(ELL\(1\))e(parsers,)
h(which)i(determine)f(which)h(clause)e(to)i(match)f(based)f(on)i(the)f
(\002rst)g(token)150 4592 y(available.)i(Sometimes)19
b(the)g(leftmost)h(tokens)g(of)f(several)f(clauses)h(may)g(be)g(the)g
(same.)25 b(The)19 b(classic)g(example)150 4692 y(is)i(the)g
Fg(if/then/else)g Fi(constr)o(uct)g(in)h(Pascal:)p Black
Black 150 4875 a Fj(rule)49 b(stmt:)99 b("if")49 b(expr)g("then")g
(stmt)g({{)g(then_part)f(=)i(stmt)f(}})1246 4974 y("else")g(stmt)g({{)g
(return)g(\('If',expr,then_part,stmt\))c(}})648 5074
y(|)50 b("if")f(expr)g("then")g(stmt)g({{)g(return)g
(\('If',expr,stmt,[]\))d(}})p Black 1899 5482 a Fi(8)p
Black eop
%%Page: 9 9
9 8 bop Black Black 275 216 a Fi(\(Note)25 b(that)h(we)g(have)f(to)h
(save)f(the)h(\002rst)g Fj(stmt)f Fi(into)i(a)e(variable)f(because)h
(ther)o(e)g(is)h(another)g Fj(stmt)f Fi(that)150 315
y(will)d(be)e(matched.\))25 b(The)c(left)f(portions)i(of)f(the)g(two)h
(clauses)e(ar)o(e)g(the)h(same,)f(which)i(pr)o(esents)e(a)h(pr)o(oblem)
f(for)150 415 y(the)25 b(parser)-6 b(.)36 b(The)25 b(solution)i(is)e
Fg(left-factoring)p Fi(:)32 b(the)25 b(common)h(parts)f(ar)o(e)e(put)i
(together)-6 b(,)26 b(and)e Fg(then)g Fi(a)h(choice)g(is)150
515 y(made)20 b(about)h(the)g(r)o(emaining)f(part:)p
Black Black 150 690 a Fj(rule)49 b(stmt:)99 b("if")49
b(expr)847 790 y("then")g(stmt)g({{)h(then_part)e(=)h(stmt)g(}})847
889 y({{)h(else_part)e(=)i([])f(}})847 989 y([)h("else")f(stmt)g({{)g
(else_part)f(=)i(stmt)f(}})g(])748 1088 y({{)g(return)g(\('If',)g
(expr,)f(then_part,)g(else_part\))g(}})275 1264 y Fi(Unfortunately)-9
b(,)26 b(the)g(classic)g Fg(if/then/else)g Fi(situation)h(is)f
Fg(still)g Fi(ambiguous)h(when)g(you)f(left-factor)-6
b(.)40 b(Y)-8 b(apps)150 1363 y(can)20 b(deal)g(with)i(this)f
(situation,)h(but)f(will)g(r)o(eport)f(a)g(warning;)h(see)g(section)g
(3.3)f(for)g(details.)275 1463 y(In)h(general,)f(r)o(eplace)f(r)o(ules)
i(of)f(the)h(form:)p Black Black 150 1638 a Fj(rule)49
b(A:)149 b(a)50 b(b1)f({{)h(return)e(E1)i(}})549 1738
y(|)f(a)h(b2)f({{)h(return)e(E2)i(}})549 1837 y(|)f(c3)149
b({{)50 b(return)e(E3)i(}})549 1937 y(|)f(c4)149 b({{)50
b(return)e(E4)i(}})275 2112 y Fi(with)21 b(r)o(ules)g(of)g(the)g(form:)
p Black Black 150 2288 a Fj(rule)49 b(A:)149 b(a)50 b(\()f(b1)h({{)f
(return)g(E1)g(}})748 2387 y(|)g(b2)h({{)f(return)g(E2)g(}})748
2487 y(\))549 2586 y(|)g(c3)149 b({{)50 b(return)e(E3)i(}})549
2686 y(|)f(c4)149 b({{)50 b(return)e(E4)i(}})150 2927
y Fe(3.2)p 0 0 0.3 TeXcolorrgb 99 w(Left)25 b(Recursion)p
Black 150 3086 a Fi(A)i(common)i(constr)o(uct)f(in)g(grammars)f(is)h
(for)g(matching)g(a)f(list)h(of)f(patterns,)i(sometimes)f(separated)e
(with)150 3185 y(delimiters)f(such)g(as)g(commas)g(or)g(semicolons.)39
b(In)25 b(LR-based)f(parser)g(systems,)i(we)f(can)g(parse)f(a)g(list)h
(with)150 3285 y(something)d(like)f(this:)p Black Black
150 3460 a Fj(rule)49 b(sum:)99 b(NUM)647 b({{)49 b(return)g(NUM)g(}})
598 3560 y(|)h(sum)f("+")g(NUM)249 b({{)49 b(return)g(\(sum,)g(NUM\))g
(}})275 3735 y Fi(Parsing)22 b Fj(1+2+3+4)f Fi(would)i(pr)o(oduce)e
(the)h(output)h Fj(\(\(\(1,2\),3\),4\))p Fi(,)d(which)j(is)f(what)h(we)
f(want)g(fr)o(om)150 3834 y(a)f(left-associative)f(addition)h(operator)
-6 b(.)25 b(Unfortunately)-9 b(,)21 b(this)h(grammar)e(is)i
Fg(left)f(r)o(ecursive,)g Fi(because)f(the)i Fj(sum)150
3934 y Fi(r)o(ule)f(contains)g(a)g(clause)f(that)h(begins)g(with)g
Fj(sum)p Fi(.)k(\(The)c(r)o(ecursion)f(occurs)h(at)g(the)f(left)h(side)
f(of)h(the)g(clause.\))275 4034 y(W)-8 b(e)20 b(must)i(r)o(estr)o
(uctur)o(e)d(this)j(grammar)e(to)h(be)f Fg(right)g(r)o(ecursive)h
Fi(instead:)p Black Black 150 4209 a Fj(rule)49 b(sum:)99
b(NUM)647 b({{)49 b(return)g(NUM)g(}})598 4309 y(|)h(NUM)f("+")g(sum)
249 b({{)49 b(return)g(\(NUM,)g(sum\))g(}})275 4484 y
Fi(Unfortunately)-9 b(,)29 b(using)h(this)f(grammar)-6
b(,)29 b Fj(1+2+3+4)f Fi(would)h(be)f(parsed)f(as)h Fj
(\(1,\(2,\(3,4\)\)\))p Fi(,)g(which)150 4583 y(no)c(longer)g(follows)h
(left)e(associativity)-9 b(.)34 b(The)23 b(r)o(ule)h(also)g(needs)f(to)
h(be)f(left-factor)o(ed.)31 b(Instead,)24 b(we)f(write)h(the)150
4683 y(pattern)c(as)h(a)f(loop)h(instead:)p Black Black
150 4858 a Fj(rule)49 b(sum:)348 b(NUM)49 b({{)h(v)f(=)h(NUM)f(}})947
4958 y(\()h("[+]")f(NUM)g({{)g(v)h(=)f(\(v,NUM\))g(}})g(\)*)947
5058 y({{)g(return)g(v)h(}})275 5233 y Fi(In)21 b(general,)f(r)o
(eplace)f(r)o(ules)i(of)f(the)h(form:)p Black 1899 5482
a(9)p Black eop
%%Page: 10 10
10 9 bop Black Black Black Black 150 216 a Fj(rule)49
b(A:)99 b(A)50 b(a1)f(->)h(<<)f(E1)h(>>)499 315 y(|)f(A)h(a2)f(->)h(<<)
f(E2)h(>>)499 415 y(|)f(b3)149 b(->)50 b(<<)f(E3)h(>>)499
515 y(|)f(b4)149 b(->)50 b(<<)f(E4)h(>>)275 670 y Fi(with)21
b(r)o(ules)g(of)g(the)g(form:)p Black Black 150 825 a
Fj(rule)49 b(A:)99 b(\()50 b(b3)f({{)h(A)f(=)h(E3)g(}})598
924 y(|)g(b4)f({{)h(A)f(=)h(E4)g(}})f(\))598 1024 y(\()h(a1)f({{)h(A)f
(=)h(E1)g(}})598 1124 y(|)g(a2)f({{)h(A)f(=)h(E2)g(}})f(\)*)598
1223 y({{)h(return)e(A)i(}})275 1378 y Fi(W)-8 b(e)20
b(have)g(taken)h(a)f(r)o(ule)h(that)f(pr)o(oved)g(pr)o(oblematic)g(for)
g(with)i(r)o(ecursion)e(and)g(turned)h(it)g(into)g(a)f(r)o(ule)h(that)
150 1478 y(works)g(well)h(with)f(looping)h(constr)o(ucts.)150
1716 y Fe(3.3)p 0 0 0.3 TeXcolorrgb 99 w(Ambiguous)j(Grammars)p
Black 150 1874 a Fi(In)33 b(section)h(3.1)e(we)h(saw)g(the)g(classic)g
(if/then/else)g(ambiguity)-9 b(,)36 b(which)e(occurs)f(because)f(the)h
(\223else)g(.)12 b(.)g(.)g(\224)150 1973 y(portion)30
b(of)f(an)g(\223if)g(.)12 b(.)g(.)g(then)30 b(.)12 b(.)g(.)g(else)30
b(.)12 b(.)g(.)g(\224)51 b(constr)o(uct)30 b(is)g(optional.)51
b(Pr)o(ograms)29 b(with)h(nested)f(if/then/else)150 2073
y(constr)o(ucts)22 b(can)e(be)h(ambiguous)g(when)h(one)f(of)f(the)h
(else)g(clauses)g(is)g(missing:)p Black Black 150 2217
a Fj(if)49 b(1)h(then)597 b(if)50 b(1)f(then)349 2317
y(if)h(5)f(then)597 b(if)50 b(5)f(then)549 2416 y(x)g(:=)h(1;)697
b(x)49 b(:=)h(1;)349 2516 y(else)647 b(else)549 2615
y(y)49 b(:=)h(9;)497 b(y)50 b(:=)f(9;)275 2759 y Fi(The)25
b(indentation)i(shows)g(that)e(the)h(pr)o(ogram)f(can)h(be)f(parsed)g
(in)h(two)g(dif)o(fer)o(ent)e(ways.)40 b(\(Of)25 b(course,)i(if)150
2859 y(we)d(all)f(would)h(adopt)f(Python's)j(indentation-based)d(str)o
(ucturing,)i(this)f(would)g(never)f(happen!\))34 b(Usually)150
2959 y(we)25 b(want)f(the)h(parsing)g(on)g(the)g(left:)33
b(the)25 b(\223else\224)e(should)i(be)g(associated)f(with)h(the)g
(closest)g(\223if)5 b(\224)23 b(statement.)150 3058 y(In)e(section)h
(3.1)d(we)i(\223solved\224)f(the)h(pr)o(oblem)f(by)h(using)g(the)g
(following)i(grammar:)p Black Black 150 3213 a Fj(rule)49
b(stmt:)99 b("if")49 b(expr)847 3313 y("then")g(stmt)g({{)h(then_part)e
(=)h(stmt)g(}})847 3413 y({{)h(else_part)e(=)i([])f(}})847
3512 y([)h("else")f(stmt)g({{)g(else_part)f(=)i(stmt)f(}})g(])748
3612 y({{)g(return)g(\('If',)g(expr,)f(then_part,)g(else_part\))g(}})
275 3767 y Fi(Her)o(e,)23 b(we)h(have)g(an)g(optional)h(match)f(of)g
(\223else\224)f(followed)i(by)f(a)g(statement.)36 b(The)24
b(ambiguity)h(is)f(that)g(if)150 3866 y(an)c(\223else\224)f(is)i(pr)o
(esent,)e(it)i(is)f(not)h(clear)f(whether)g(you)h(want)g(it)f(parsed)f
(immediately)i(or)f(if)g(you)h(want)f(it)h(to)f(be)150
3966 y(parsed)g(by)g(the)h(outer)g(\223if)5 b(\224.)275
4066 y(Y)-8 b(apps)21 b(will)h(deal)f(with)h(the)f(situation)h(by)g
(matching)g(when)g(the)f(else)h(pattern)e(when)i(it)g(can.)27
b(The)21 b(parser)150 4165 y(will)k(work)g(in)g(this)g(case)e(because)h
(it)g(pr)o(efers)f(the)h Fg(\002rst)h Fi(matching)g(clause,)f(which)h
(tells)g(Y)-8 b(apps)25 b(to)f(parse)g(the)150 4265 y(\223else\224.)g
(That)d(is)g(exactly)f(what)h(we)g(want!)275 4365 y(For)k(ambiguity)h
(cases)f(with)h(choices,)h(Y)-8 b(apps)25 b(will)i(choose)f(the)f
Fg(\002rst)h Fi(matching)g(choice.)39 b(However)-6 b(,)26
b(r)o(e-)150 4464 y(member)d(that)f(Y)-8 b(apps)23 b(only)h(looks)g(at)
e(the)h(\002rst)g(token)g(to)g(determine)g(its)g(decision,)g(so)h
Fj(\(a)49 b(b)h(|)f(a)h(c\))22 b Fi(will)150 4564 y(r)o(esult)k(in)h(Y)
-8 b(apps)26 b(choosing)i Fj(a)50 b(b)26 b Fi(even)g(when)h(the)f
(input)h(is)f Fj(a)50 b(c)p Fi(.)42 b(It)26 b(only)h(looks)h(at)d(the)i
(\002rst)f(token,)i Fj(a)p Fi(,)g(to)150 4663 y(make)21
b(its)g(decision.)150 4944 y Fh(4)p 0 0 0.6 TeXcolorrgb
119 w(Customization)p Black 150 5133 a Fi(Both)e(the)h(parsers)e(and)g
(the)h(scanners)g(can)g(be)g(customized.)25 b(The)19
b(parser)f(is)h(usually)g(extended)f(by)h(subclass-)150
5233 y(ing,)i(and)f(the)h(scanner)g(can)f(either)h(be)f(subclassed)h
(or)g(completely)g(r)o(eplaced.)p Black 1878 5482 a(10)p
Black eop
%%Page: 11 11
11 10 bop Black Black 150 216 a Fe(4.1)p 0 0 0.3 TeXcolorrgb
99 w(Customizing)26 b(Parsers)p Black 150 374 a Fi(If)j(additional)f
(\002elds)i(and)e(methods)i(ar)o(e)e(needed)g(in)h(or)o(der)f(for)h(a)g
(parser)f(to)h(work,)j(Python)e(subclassing)150 474 y(can)25
b(be)g(used.)38 b(\(This)25 b(is)h(unlike)f(parser)g(classes)g(written)
g(in)h(static)f(languages,)g(in)h(which)g(these)f(\002elds)g(and)150
573 y(methods)19 b(must)g(be)f(de\002ned)g(in)h(the)f(generated)f
(parser)g(class.\))25 b(W)-8 b(e)18 b(simply)h(subclass)g(the)f
(generated)f(parser)-6 b(,)150 673 y(and)29 b(add)f(any)h(\002elds)g
(or)h(methods)g(r)o(equir)o(ed.)49 b(Expr)o(essions)29
b(in)h(the)f(grammar)g(can)g(call)g(methods)h(of)f(the)150
772 y(subclass)e(to)g(perform)f(any)h(actions)h(that)e(cannot)i(be)e
(expr)o(essed)f(as)i(a)f(simple)h(expr)o(ession.)44 b(For)27
b(example,)150 872 y(consider)21 b(this)g(simple)h(grammar:)p
Black Black 150 1055 a Fj(parser)49 b(X:)349 1154 y(rule)g(goal:)99
b("something")f({{)49 b(self.printmsg\(\))e(}})275 1337
y Fi(The)18 b Fj(printmsg)f Fi(function)i(need)g(not)g(be)f
(implemented)h(in)g(the)f(parser)g(class)g Fj(X)p Fi(;)h(it)f(can)h(be)
f(implemented)150 1437 y(in)j(a)f(subclass:)p Black Black
150 1619 a Fj(import)49 b(Xparser)150 1818 y(class)g(MyX\(Xparser.X\):)
349 1918 y(def)h(printmsg\(self\):)549 2018 y(print)e("Hello!")150
2260 y Fe(4.2)p 0 0 0.3 TeXcolorrgb 99 w(Customizing)26
b(Scanners)p Black 150 2419 a Fi(The)f(generated)e(parser)h(class)h(is)
g(not)g(dependent)f(on)i(the)e(generated)g(scanner)g(class.)38
b(A)24 b(scanner)h(object)g(is)150 2518 y(passed)d(to)h(the)g(parser)f
(object's)i(constr)o(uctor)g(in)f(the)g Fj(parse)f Fi(function.)33
b(T)-8 b(o)23 b(use)g(a)f(dif)o(fer)o(ent)f(scanner)-6
b(,)23 b(write)150 2618 y(your)c(own)g(function)h(to)e(constr)o(uct)i
(parser)d(objects,)j(with)f(an)f(instance)h(of)g(a)f(dif)o(fer)o(ent)e
(scanner)-6 b(.)24 b(Scanner)18 b(ob-)150 2717 y(jects)i(must)h(have)e
(a)h Fj(token)f Fi(method)h(that)g(accepts)f(an)h(integer)g
Fj(N)g Fi(as)g(well)g(as)g(a)f(list)i(of)f(allowed)g(token)g(types,)150
2817 y(and)g(r)o(eturns)g(the)g(Nth)h(token,)f(as)g(a)g(tuple.)25
b(The)20 b(default)g(scanner)g(raises)f Fj(NoMoreTokens)f
Fi(if)i(no)h(tokens)g(ar)o(e)150 2917 y(available,)26
b(and)f Fj(SyntaxError)f Fi(if)h(no)i(token)g(could)f(be)f(matched.)41
b(However)-6 b(,)26 b(the)g(parser)f(does)h(not)h(r)o(ely)150
3016 y(on)21 b(these)g(exceptions;)f(only)i(the)f Fj(parse)e
Fi(convenience)i(function)g(\(which)g(calls)g Fj(wrap)p
2961 3016 25 4 v 29 w(error)p 3240 3016 V 29 w(reporter)p
Fi(\))150 3116 y(and)f(the)h Fj(print)p 702 3116 V 29
w(error)f Fi(err)o(or)g(display)g(function)i(use)f(those)g(exceptions.)
275 3216 y(The)i(tuples)g(r)o(epr)o(esenting)f(tokens)i(have)f(four)g
(elements.)33 b(The)24 b(\002rst)f(two)h(ar)o(e)e(the)h(beginning)i
(and)e(end-)150 3315 y(ing)k(indices)g(of)f(the)h(matched)f(text)g(in)h
(the)f(input)h(string.)43 b(The)27 b(thir)o(d)f(element)g(is)h(the)g
(type)f(tag,)h(matching)150 3415 y(either)22 b(the)g(name)f(of)h(a)f
(named)h(token)g(or)g(the)g(quoted)h(r)o(egexp)d(of)i(an)f(inline)i(or)
f(ignor)o(ed)g(token.)29 b(The)22 b(fourth)150 3514 y(element)30
b(of)f(the)h(token)g(tuple)g(is)f(the)h(matched)f(text.)52
b(If)29 b(the)h(input)g(string)g(is)g Fj(s)p Fi(,)h(and)e(the)h(token)g
(tuple)g(is)150 3614 y Fj(\(b,e,type,val\))p Fi(,)18
b(then)j Fj(val)f Fi(should)i(be)e(equal)h(to)g Fj(s[b:e])p
Fi(.)275 3714 y(The)26 b(generated)g(parsers)g(do)h(not)g(the)g
(beginning)h(or)f(ending)h(index.)43 b(They)27 b(use)g(only)h(the)f
(token)g(type)150 3813 y(and)21 b(value.)26 b(However)-6
b(,)21 b(the)h(default)e(err)o(or)g(r)o(eporter)g(uses)i(the)f
(beginning)i(and)e(ending)h(index)f(to)g(show)i(the)150
3913 y(user)e(wher)o(e)f(the)h(err)o(or)e(is.)150 4199
y Fh(5)p 0 0 0.6 TeXcolorrgb 119 w(Parser)29 b(Mechanics)p
Black 150 4388 a Fi(The)24 b(base)f(parser)f(class)i(\(Parser\))e
(de\002nes)i(two)g(methods,)p 2085 4388 V 55 w Fj(scan)f
Fi(and)p 2502 4388 V 53 w Fj(peek)p Fi(,)h(and)f(two)h(\002elds,)p
3351 4388 V 54 w Fj(pos)f Fi(and)p 150 4487 V 175 4487
a Fj(scanner)p Fi(.)h(The)c(generated)f(parser)h(inherits)h(fr)o(om)f
(the)g(base)g(parser)-6 b(,)19 b(and)h(contains)h(one)g(method)f(for)h
(each)150 4587 y(r)o(ule)g(in)g(the)g(grammar)-6 b(.)25
b(T)-8 b(o)21 b(avoid)f(name)h(clashes,)g(do)f(not)i(use)f(names)g
(that)f(begin)h(with)h(an)e(underscor)o(e)g(\()p 3609
4587 V 30 w(\).)150 4830 y Fe(5.1)p 0 0 0.3 TeXcolorrgb
99 w(Parser)k(Objects)p Black 150 4988 a Fi(Y)-8 b(apps)27
b(pr)o(oduces)g(as)f(output)i(two)g(exception)f(classes,)h(a)f(scanner)
g(class,)h(a)f(parser)f(class,)i(and)f(a)f(function)150
5088 y Fj(parse)20 b Fi(that)i(puts)f(everything)h(together)-6
b(.)27 b(The)21 b Fj(parse)f Fi(function)i(does)f(not)h(have)f(to)h(be)
f(used;)g(instead,)g(one)150 5187 y(can)f(cr)o(eate)f(a)i(parser)e(and)
i(scanner)f(object)h(and)g(use)g(them)g(together)g(for)f(parsing.)p
Black 1878 5482 a(11)p Black eop
%%Page: 12 12
12 11 bop Black Black Black Black 349 216 a Fj(def)50
b(parse\(rule,)d(text\):)549 315 y(P)i(=)h(X\(XScanner\(text\)\))549
415 y(return)e(wrap_error_reporter\(P,)e(rule\))275 582
y Fi(The)24 b Fj(parse)g Fi(function)h(takes)f(a)g(name)g(of)h(a)f(r)o
(ule)h(and)f(an)g(input)h(string)g(as)f(input.)38 b(It)24
b(cr)o(eates)f(a)h(scanner)150 682 y(and)g(parser)f(object,)j(then)f
(calls)f Fj(wrap)p 1411 682 25 4 v 29 w(error)p 1690
682 V 29 w(reporter)f Fi(to)i(execute)e(the)i(method)g(in)g(the)f
(parser)g(object)150 781 y(named)e Fj(rule)p Fi(.)31
b(The)23 b(wrapper)f(function)h(will)h(call)e(the)h(appr)o(opriate)e
(parser)h(r)o(ule)h(and)f(r)o(eport)g(any)h(parsing)150
881 y(err)o(ors)d(to)h(standar)o(d)e(output.)275 980
y(Ther)o(e)24 b(ar)o(e)g(several)h(situations)i(in)f(which)g(the)g
Fj(parse)e Fi(function)j(would)f(not)g(be)f(useful.)40
b(If)25 b(a)g(dif)o(fer)o(ent)150 1080 y(parser)f(or)i(scanner)f(is)h
(being)g(used,)g(or)g(exceptions)f(ar)o(e)g(to)g(be)h(handled)f(dif)o
(fer)o(ently)-9 b(,)24 b(a)h(new)h Fj(parse)e Fi(func-)150
1180 y(tion)29 b(would)f(be)g(r)o(equir)o(ed.)46 b(The)28
b(supplied)g Fj(parse)f Fi(function)i(can)e(be)h(used)g(as)g(a)f
(template)h(for)g(writing)g(a)150 1279 y(function)c(for)f(your)h(own)g
(needs.)33 b(An)24 b(example)e(of)h(a)g(custom)i(parse)d(function)i(is)
g(the)f Fj(generate)f Fi(function)150 1379 y(in)f Fj(Yapps.py)p
Fi(.)150 1619 y Fe(5.2)p 0 0 0.3 TeXcolorrgb 99 w(Context)k(Sensitive)h
(Scanner)p Black 150 1777 a Fi(Unlike)21 b(most)g(scanners,)g(the)g
(scanner)f(pr)o(oduced)g(by)g(Y)-8 b(apps)21 b(can)g(take)f(into)h
(account)g(the)g(context)g(in)g(which)150 1876 y(tokens)h(ar)o(e)d
(needed,)h(and)g(try)h(to)g(match)g(only)g(good)h(tokens.)k(For)21
b(example,)f(in)h(the)g(grammar:)p Black Black 150 2043
a Fj(parser)49 b(IniFile:)299 2143 y(token)g(ID:)149
b("[a-zA-Z_0-9]+")299 2242 y(token)49 b(VAL:)99 b(".*")299
2442 y(rule)50 b(pair:)98 b(ID)50 b("[)f(\\t]*=[)g(\\t]*")g(VAL)g
("\\n")275 2608 y Fi(we)20 b(would)g(like)g(to)h(scan)f(lines)g(of)g
(text)g(and)g(pick)g(out)g(a)g(name/value)f(pair)-6 b(.)25
b(In)20 b(a)g(conventional)h(scanner)-6 b(,)150 2708
y(the)31 b(input)h(string)g Fj(shell=progman.exe)27 b
Fi(would)32 b(be)f(turned)g(into)h(a)e(single)i(token)g(of)f(type)g
Fj(VAL)p Fi(.)f(The)150 2808 y(Y)-8 b(apps)30 b(scanner)-6
b(,)32 b(however)-6 b(,)33 b(knows)e(that)f(at)g(the)h(beginning)g(of)f
(the)h(line,)i(an)d Fj(ID)f Fi(is)i(expected,)g(so)g(it)f(will)150
2907 y(r)o(eturn)25 b Fj("shell")g Fi(as)h(a)f(token)i(of)f(type)g
Fj(ID)p Fi(.)f(Later)-6 b(,)26 b(it)g(will)h(r)o(eturn)f
Fj("progman.exe")d Fi(as)j(a)f(token)i(of)f(type)150
3007 y Fj(VAL)p Fi(.)275 3107 y(Context)j(sensitivity)i(decr)o(eases)c
(the)j(separation)f(between)g(scanner)g(and)g(parser)-6
b(,)30 b(but)g(it)f(is)h(useful)g(in)150 3206 y(parsers)22
b(like)h Fj(IniFile)p Fi(,)f(wher)o(e)h(the)g(tokens)h(themselves)f(ar)
o(e)f(not)i(unambiguous,)g(but)f Fg(ar)o(e)g Fi(unambiguous)150
3306 y(given)e(a)f(particular)g(stage)g(in)i(the)e(parsing)h(pr)o
(ocess.)275 3406 y(Unfortunately)-9 b(,)23 b(context)g(sensitivity)h
(can)f(make)g(it)h(mor)o(e)e(dif)o(\002cult)h(to)h(detect)e(err)o(ors)g
(in)i(the)f(input.)34 b(For)150 3505 y(example,)20 b(in)h(parsing)f(a)g
(Pascal-like)g(language)g(with)i(\223begin\224)e(and)g(\223end\224)f
(as)i(keywor)o(ds,)f(a)g(context)h(sensi-)150 3605 y(tive)g(scanner)g
(would)h(only)g(match)f(\223end\224)f(as)h(the)g(END)g(token)h(if)f
(the)h(parser)e(is)h(in)h(a)f(place)f(that)h(will)h(accept)150
3704 y(the)c(END)g(token.)25 b(If)17 b(not,)i(then)f(the)g(scanner)f
(would)i(match)e(\223end\224)g(as)h(an)f(identi\002er)-6
b(.)24 b(T)-8 b(o)19 b(disable)e(the)h(context)150 3804
y(sensitive)j(scanner)g(in)g(Y)-8 b(apps,)21 b(add)f(the)g
Fj(context-insensitive-scanner)c Fi(option)22 b(to)f(the)g(grammar:)p
Black Black 150 3971 a Fj(Parser)49 b(X:)349 4070 y(option:)99
b("context-insensitive-scanner")275 4237 y Fi(Context-insensitive)21
b(scanning)h(makes)f(the)f(parser)g(look)i(cleaner)e(as)g(well.)150
4477 y Fe(5.3)p 0 0 0.3 TeXcolorrgb 99 w(Internal)k(V)-11
b(ariables)p Black 150 4635 a Fi(Ther)o(e)22 b(ar)o(e)f(two)j(internal)
f(\002elds)g(that)f(may)h(be)g(of)f(use.)32 b(The)23
b(parser)f(object)h(has)g(two)g(\002elds,)p 3162 4635
V 53 w Fj(pos)p Fi(,)g(which)h(is)150 4735 y(the)j(index)f(of)h(the)f
(curr)o(ent)g(token)h(being)g(matched,)g(and)p 2060 4735
V 56 w Fj(scanner)p Fi(,)g(which)g(is)g(the)g(scanner)f(object.)43
b(The)150 4834 y(token)25 b(itself)e(can)h(be)g(r)o(etrieved)e(by)i
(accessing)g(the)g(scanner)g(object)g(and)f(calling)i(the)f
Fj(token)f Fi(method)h(with)150 4934 y(the)i(token)g(index.)40
b(A)25 b(potentially)h(useful)f(combination)i(of)f(these)f(\002elds)h
(is)g(to)g(extract)e(the)i(portion)g(of)g(the)150 5034
y(input)18 b(matched)e(by)h(the)h(curr)o(ent)e(r)o(ule.)24
b(The)18 b(\002rst)f(element)g(of)g(a)g(token)h(tuple)f(is)g(the)g
(start)g(character)f(position,)150 5133 y(and)25 b(the)h(second)g
(element)g(is)g(the)f(end)h(character)e(position,)k(so)e(we)g(can)f
(determine)h(the)f(text)h(matched)f(by)150 5233 y(the)c(curr)o(ent)f(r)
o(ule)h(by)g(extracting)f(a)g(portion)i(of)e(the)h(input)h(string:)p
Black 1878 5482 a(12)p Black eop
%%Page: 13 13
13 12 bop Black Black Black Black 250 216 a Fj(rule)49
b(R:)449 315 y({{)g(start,_,_,_)f(=)i(self._scanner.token\(self._pos\))
44 b(}})449 415 y(a)50 b(b)f(c)449 515 y({{)g(_,end,_,_)f(=)i
(self._scanner.token\(self._pos\))44 b(}})449 614 y({{)49
b(print)g('Text)g(is',)g(self._scanner.input[start:end])44
b(}})150 857 y Fe(5.4)p 0 0 0.3 TeXcolorrgb 99 w(Pre-)25
b(and)f(Post-Parser)h(Code)p Black 150 1015 a Fi(Sometimes)31
b(the)f(parser)f(code)g(needs)h(to)h(r)o(ely)e(on)i(helper)e
(variables,)i(functions,)i(and)d(classes.)53 b(A)30 b(Y)-8
b(apps)150 1115 y(grammar)25 b(can)g(optionally)h(be)f(surr)o(ounded)g
(by)g(double)h(per)o(cent)e(signs,)j(to)f(separate)e(the)i(grammar)e
(fr)o(om)150 1214 y(Python)e(code.)p Black Black 150
1397 a Fj(...)49 b(Python)g(code)g(...)150 1496 y(\045\045)150
1596 y(...)g(Yapps)g(grammar)g(...)150 1695 y(\045\045)150
1795 y(...)g(Python)g(code)g(...)275 1977 y Fi(The)26
b(second)h Fj(\045\045)f Fi(can)h(be)f(omitted)h(if)g(ther)o(e)f(is)h
(no)g(Python)h(code)f(at)f(the)h(end,)g(and)g(the)g(\002rst)g
Fj(\045\045)f Fi(can)g(be)150 2077 y(omitted)c(if)g(ther)o(e)g(is)g(no)
h(extra)e(Python)i(code)f(at)g(all.)29 b(\(T)-8 b(o)22
b(have)g(code)g(only)h(at)e(the)i(end,)f(both)g(separators)f(ar)o(e)150
2177 y(r)o(equir)o(ed.\))275 2276 y(If)d(the)h(second)h
Fj(\045\045)e Fi(is)i(omitted,)f(Y)-8 b(apps)20 b(will)f(insert)h
(testing)f(code)g(that)g(allows)h(you)f(to)h(use)f(the)g(generated)150
2376 y(parser)h(to)h(parse)f(a)g(\002le.)275 2476 y(The)c(extended)g
(calculator)g(example)h(in)g(the)g(Y)-8 b(apps)17 b(examples)g(subdir)o
(ectory)f(includes)h(both)g(pr)o(e-parser)150 2575 y(and)j(post-parser)
g(code.)150 2818 y Fe(5.5)p 0 0 0.3 TeXcolorrgb 99 w(Representation)25
b(of)g(Grammars)p Black 150 2976 a Fi(For)17 b(each)f(kind)h(of)f
(pattern)g(ther)o(e)g(is)h(a)f(class)g(derived)f(fr)o(om)i(Pattern.)23
b(Y)-8 b(apps)17 b(has)g(classes)f(for)g(T)-8 b(erminal,)18
b(Non-)150 3075 y(T)-8 b(erminal,)23 b(Sequence,)f(Choice,)h(Option,)g
(Plus,)h(Star)-6 b(,)21 b(and)h(Eval.)30 b(Each)21 b(of)i(these)f
(classes)h(has)f(the)g(following)150 3175 y(interface:)p
Black -61 3357 a(setup\()p Fg(gen)p Fi(\))p Black 41
w(Set)27 b(accepts-)p Fc(\017)p Fi(,)h(and)g(call)g Fg(gen.changed\(\))
e Fi(if)i(it)g(changed.)47 b(This)29 b(function)g(can)f(change)g(the)g
(\003ag)g(fr)o(om)358 3457 y(false)20 b(to)h(tr)o(ue)g(but)f
Fg(not)h Fi(fr)o(om)f(tr)o(ue)h(to)g(false.)p Black -188
3623 a(update\()p Fg(\()p Fi(gen\)\))p Black 40 w(Set)h
Fa(FI)t(R)t(S)t(T)r Fi(and)h Fa(F)t(O)t(L)t(L)t(O)t(W)r
Fi(,)e(and)f(call)g Fg(gen.changed\(\))f Fi(if)h(either)h(changed.)k
(This)c(function)h(can)e(add)g(to)h(the)358 3723 y(sets)g(but)f
Fg(not)h Fi(r)o(emove)f(fr)o(om)g(them.)p Black -367
3888 a(output\()p Fg(gen)p Fi(,)h Fg(indent)p Fi(\))p
Black 41 w(Generate)j(code)h(for)f(matching)i(this)g(r)o(ule,)g(using)g
Fg(indent)e Fi(as)h(the)g(curr)o(ent)f(indentation)i(level.)38
b(W)-6 b(rites)358 3988 y(ar)o(e)19 b(performed)h(using)h
Fg(gen.write)p Fi(.)p Black -58 4154 a(used\()p Fg(vars)p
Fi(\))p Black 41 w(Given)28 b(a)f(list)h(of)g(variables)e
Fg(vars)p Fi(,)j(r)o(eturn)e(two)h(lists:)40 b(one)29
b(containing)f(the)g(variables)f(that)g(ar)o(e)f(used,)358
4254 y(and)20 b(one)h(containing)h(the)f(variables)f(that)h(ar)o(e)e
(assigned.)26 b(This)21 b(function)h(is)f(used)f(for)h(optimizing)h
(the)358 4353 y(r)o(esulting)e(code.)275 4535 y(Both)27
b Fg(setup)g Fi(and)g Fg(update)f Fi(monotonically)j(incr)o(ease)d(the)
i(variables)e(they)h(modify)-9 b(.)45 b(Since)27 b(the)g(variables)150
4635 y(can)c(only)i(incr)o(ease)d(a)h(\002nite)h(number)g(of)f(times,)i
(we)e(can)h(r)o(epeatedly)d(call)i(the)h(function)g(until)h(the)e
(variable)150 4735 y(stabilized.)i(The)20 b Fg(used)h
Fi(function)h(is)f(not)h(curr)o(ently)e(implemented.)275
4834 y(W)-5 b(ith)24 b(each)f(pattern)g(in)h(the)f(grammar)g(Y)-8
b(apps)24 b(associates)f(thr)o(ee)g(pieces)g(of)g(information:)32
b(the)26 b Fa(FI)t(R)t(S)t(T)r Fi(set,)150 4934 y(the)d
Fa(F)t(O)t(L)t(L)t(O)t(W)r Fi(set,)e(and)f(the)h(accepts-)p
Fc(\017)e Fi(\003ag.)275 5034 y(The)26 b Fa(FI)t(R)t(S)t(T)r
Fi(set)f(contains)g(the)g(tokens)g(that)g(can)f(appear)e(as)j(we)f
(start)g(matching)h(the)g(pattern.)36 b(The)26 b Fa(F)t(O)t(L)t
Fi(-)152 5133 y Fa(L)t(O)t(W)r Fi(set)17 b(contains)g(the)g(tokens)g
(that)f(can)h(appear)d(immediately)j(after)e(we)i(match)f(the)h
(pattern.)23 b(The)16 b(accepts-)p Fc(\017)150 5233 y
Fi(\003ag)24 b(is)h(tr)o(ue)g(if)f(the)g(pattern)g(can)g(match)g(no)h
(tokens.)37 b(In)25 b(this)g(case,)i Fa(FI)t(R)t(S)t(T)r
Fi(will)e(contain)g(all)f(the)h(elements)g(in)p Black
1878 5482 a(13)p Black eop
%%Page: 14 14
14 13 bop Black Black 152 216 a Fa(F)t(O)t(L)t(L)t(O)t(W)r
Fi(.)26 b(The)d Fa(F)t(O)t(L)t(L)t(O)t(W)r Fi(set)e(is)g(not)h(needed)d
(when)j(accepts-)p Fc(\017)d Fi(is)i(false,)f(and)g(may)h(not)g(be)g
(accurate)e(in)i(those)150 315 y(cases.)275 415 y(Y)-8
b(apps)19 b(does)g(not)h(compute)f(these)h(sets)f(pr)o(ecisely)-9
b(.)24 b(Its)c(appr)o(oximation)e(can)h(miss)h(certain)f(cases,)g(such)
g(as)150 515 y(this)i(one:)p Black Black 250 697 a Fj(rule)49
b(C:)g(\()h(A*)f(|)h(B)f(\))250 797 y(rule)g(B:)g(C)h([A])275
980 y Fi(Y)-8 b(apps)21 b(will)h(calculate)e Fj(C)p Fi('s)j
Fa(F)t(O)t(L)t(L)t(O)t(W)r Fi(set)f(to)f(include)h Fj(A)p
Fi(.)e(However)-6 b(,)21 b Fj(C)g Fi(will)h(always)f(match)g(all)g(the)
g Fj(A)p Fi('s,)g(so)150 1079 y Fj(A)c Fi(will)i(never)e(follow)h(it.)
25 b(Y)-8 b(apps)18 b(2.0)e(does)i(not)g(pr)o(operly)f(handle)h(this)g
(constr)o(uct,)h(but)f(if)f(it)h(seems)g(important,)150
1179 y(I)j(may)f(add)g(support)h(for)g(it)g(in)g(a)f(futur)o(e)g
(version.)275 1279 y(Y)-8 b(apps)21 b(also)f(cannot)i(handle)e(constr)o
(ucts)i(that)f(depend)f(on)h(the)g(calling)g(sequence.)26
b(For)21 b(example:)p Black Black 250 1461 a Fj(rule)49
b(R:)g(U)h(|)f('b')250 1561 y(rule)g(S:)149 b(|)49 b('c')250
1660 y(rule)g(T:)g(S)h('b')250 1760 y(rule)f(U:)g(S)h('a')275
1943 y Fi(The)20 b Fa(F)t(O)t(L)t(L)t(O)t(W)r Fi(set)f(for)f
Fj(S)g Fi(includes)g Fj(a)g Fi(and)g Fj(b)p Fi(.)25 b(Since)18
b Fj(S)g Fi(can)g(be)g(empty)-9 b(,)18 b(the)j Fa(FI)t(R)t(S)t(T)r
Fi(set)e(for)f Fj(S)g Fi(should)h(include)150 2042 y
Fj(a)p Fi(,)f Fj(b)p Fi(,)h(and)f Fj(c)p Fi(.)25 b(However)-6
b(,)18 b(when)h(parsing)g Fj(R)p Fi(,)f(if)g(the)g(lookahead)h(is)g
Fj(b)f Fi(we)g(should)i Fg(not)e Fi(parse)f Fj(U)p Fi(.)h(That's)h
(because)150 2142 y(in)i Fj(U)p Fi(,)f Fj(S)h Fi(is)g(followed)g(by)g
Fj(a)f Fi(and)h(not)g Fj(b)p Fi(.)k(Ther)o(efor)o(e)19
b(in)i Fj(R)p Fi(,)g(we)f(should)i(choose)f(r)o(ule)g
Fj(U)g Fi(only)g(if)g(ther)o(e)f(is)h(an)f Fj(a)h Fi(or)150
2242 y Fj(c)p Fi(,)j(but)g(not)h(if)f(ther)o(e)f(is)h(a)g
Fj(b)p Fi(.)35 b(Y)-8 b(apps)24 b(and)g(many)g(other)g(LL\(1\))f
(systems)i(do)f(not)g(distinguish)i Fj(S)49 b(b)24 b
Fi(and)g Fj(S)49 b(a)p Fi(,)150 2341 y(making)23 b Fj(S)p
Fi('s)i Fa(F)t(O)t(L)t(L)t(O)t(W)r Fi(set)e Fj(a,)49
b(b)p Fi(,)23 b(and)f(making)h Fj(R)g Fi(always)f(try)g(to)h(match)g
Fj(U)p Fi(.)f(In)h(this)g(case)f(we)h(can)f(solve)h(the)150
2441 y(pr)o(oblem)e(by)g(changing)h Fj(R)f Fi(to)h Fj('b')49
b(|)g(U)21 b Fi(but)h(it)f(may)g(not)h(always)f(be)g(possible)g(to)h
(solve)g(all)f(such)g(pr)o(oblems)150 2540 y(in)g(this)h(way)-9
b(.)150 2826 y Fh(A)p 0 0 0.6 TeXcolorrgb 120 w(Grammar)28
b(for)i(Parsers)p Black 150 3015 a Fi(This)23 b(is)f(the)g(grammar)g
(for)g(parsers,)f(without)i(any)f(Python)i(code)e(mixed)g(in.)30
b(The)22 b(complete)g(grammar)f(can)150 3115 y(be)f(found)h(in)h
Fj(parsedesc.g)c Fi(in)j(the)g(Y)-8 b(apps)21 b(distribution.)p
Black Black 150 3298 a Fj(parser)49 b(ParserDescription:)349
3397 y(ignore:)298 b("\\\\s+")349 3497 y(ignore:)g("#.*?\\r?\\n")349
3597 y(token)49 b(END:)149 b("$")99 b(#)50 b($)f(means)g(end)g(of)h
(string)349 3696 y(token)f(ATTR:)99 b("<<.+?>>")349 3796
y(token)49 b(STMT:)99 b("{{.+?}}")349 3895 y(token)49
b(ID:)199 b('[a-zA-Z_][a-zA-Z_0-9]*')349 3995 y(token)49
b(STR:)149 b('[rR]?\\'\([\210\\\\n\\'\\\\\\\\]|\\\\\\\\.\)*\\'|[r)o
(R]?"\([)o(\210\\\\n")o(\\\\\\\\])o(|\\\\\\\\.)o(\)*"')349
4194 y(rule)49 b(Parser:)g("parser")f(ID)i(":")1096 4294
y(Options)1096 4394 y(Tokens)1096 4493 y(Rules)997 4593
y(END)349 4792 y(rule)f(Options:)98 b(\()50 b("option")e(":")i(STR)f
(\)*)349 4892 y(rule)g(Tokens:)148 b(\()50 b("token")f(ID)g(":")g(STR)h
(|)f("ignore")148 b(":")49 b(STR)h(\)*)349 4991 y(rule)f(Rules:)198
b(\()50 b("rule")f(ID)g(OptParam)g(":")g(ClauseA)f(\)*)349
5191 y(rule)h(ClauseA:)98 b(ClauseB)49 b(\()h('[|]')e(ClauseB)h(\)*)p
Black 1878 5482 a Fi(14)p Black eop
%%Page: 15 15
15 14 bop Black Black 349 216 a Fj(rule)49 b(ClauseB:)98
b(ClauseC*)349 315 y(rule)49 b(ClauseC:)98 b(ClauseD)49
b([)h('[+]')e(|)i('[*]')f(])349 415 y(rule)g(ClauseD:)98
b(STR)50 b(|)f(ID)h([ATTR])e(|)i(STMT)997 515 y(|)f('\\\\\(')g(ClauseA)
g('\\\\\))g(|)h('\\\\[')e(ClauseA)h('\\\\]')150 800 y
Fh(B)p 0 0 0.6 TeXcolorrgb 119 w(Upgrading)p Black 150
990 a Fi(Y)-8 b(apps)17 b(2.0)f(is)i(not)g(backwar)o(ds)d(compatible)i
(with)h(Y)-8 b(apps)18 b(1.0.)23 b(In)17 b(this)h(section)g(ar)o(e)d
(some)j(tips)g(for)e(upgrading:)p Black 254 1172 a(1.)p
Black 41 w(Y)-8 b(apps)28 b(1.0)e(was)i(distributed)f(as)g(a)h(single)g
(\002le.)47 b(Y)-8 b(apps)28 b(2.0)e(is)i(instead)g(distributed)f(as)g
(two)i(Python)358 1272 y(\002les:)f(a)22 b Fg(parser)h(generator)g
Fi(\(26k\))d(and)i(a)g Fg(parser)h(runtime)f Fi(\(5k\).)29
b(Y)-8 b(ou)24 b(need)d(both)i(\002les)g(to)g(cr)o(eate)d(parsers,)358
1372 y(but)g(you)i(need)e(only)i(the)f(r)o(untime)g(\()p
Fj(yappsrt.py)p Fi(\))d(to)k(use)e(the)h(parsers.)p Black
254 1538 a(2.)p Black 41 w(Y)-8 b(apps)17 b(1.0)e(supported)i(Python)h
(1.4)e(r)o(egular)g(expr)o(essions)h(fr)o(om)f(the)h
Fj(regex)f Fi(module.)25 b(Y)-8 b(apps)17 b(2.0)f(uses)358
1637 y(Python)28 b(1.5)e(r)o(egular)f(expr)o(essions)i(fr)o(om)g(the)g
Fj(re)g Fi(module.)44 b Fg(The)27 b(new)g(syntax)f(for)i(r)o(egular)f
(expr)o(essions)358 1737 y(is)k(not)f(compatible)g(with)f(the)h(old)g
(syntax.)54 b Fi(Andr)o(ew)30 b(Kuchling)i(has)e(a)h(guide)f(to)h
(converting)g(r)o(egular)358 1836 y(expr)o(essions)20
b(on)i(his)f(web)g(page.)p Black 254 2003 a(3.)p Black
41 w(Y)-8 b(apps)17 b(1.0)g(wants)g(a)g(pattern)g(and)g(then)h(a)f(r)o
(eturn)g(value)g(in)h Fj(->)f(<<...>>)p Fi(.)23 b(Y)-8
b(apps)18 b(2.0)e(allows)i(patterns)358 2102 y(and)i(Python)i
(statements)f(to)g(be)g(mixed.)k(T)-8 b(o)21 b(convert)g(a)f(r)o(ule)h
(like)g(this:)p Black Black 358 2318 a Fj(rule)49 b(R:)g(A)h(B)f(C)h
(->)f(<<)h(E1)f(>>)656 2418 y(|)h(X)g(Y)f(Z)h(->)f(<<)h(E2)f(>>)358
2633 y Fi(to)21 b(Y)-8 b(apps)21 b(2.0)e(form,)i(r)o(eplace)e(the)i(r)o
(eturn)f(value)g(speci\002ers)h(with)g(r)o(eturn)f(statements:)p
Black Black 358 2849 a Fj(rule)49 b(R:)g(A)h(B)f(C)h({{)f(return)g(E1)h
(}})656 2949 y(|)g(X)g(Y)f(Z)h({{)f(return)g(E2)h(}})p
Black 254 3165 a Fi(4.)p Black 41 w(Y)-8 b(apps)23 b(2.0)g(does)g(not)i
(perform)e(tail)g(r)o(ecursion)h(elimination.)35 b(This)24
b(means)g(any)f(r)o(ecursive)g(r)o(ules)g(you)358 3264
y(write)j(will)h(be)g(turned)f(into)h(r)o(ecursive)f(methods)h(in)g
(the)g(parser)-6 b(.)42 b(The)26 b(parser)g(will)h(work,)h(but)f(may)
358 3364 y(be)j(slower)-6 b(.)58 b(It)31 b(can)g(be)g(made)f(faster)h
(by)g(r)o(ewriting)g(r)o(ecursive)f(r)o(ules,)k(using)e(instead)f(the)h
(looping)358 3464 y(operators)20 b Fj(*)h Fi(and)f Fj(+)g
Fi(pr)o(ovided)g(in)h(Y)-8 b(apps)21 b(2.0.)150 3749
y Fh(C)p 0 0 0.6 TeXcolorrgb 120 w(T)-13 b(roubleshooting)p
Black Black 275 3939 a Fd(\017)p Black 41 w Fi(A)27 b(common)i(err)o
(or)d(is)i(to)g(write)g(a)f(grammar)g(that)h(doesn't)g(have)f(an)g(END)
h(token.)47 b(End)27 b(tokens)h(ar)o(e)358 4038 y(needed)16
b(when)i(it)g(is)g(not)g(clear)f(when)h(to)g(stop)g(parsing.)24
b(For)18 b(example,)f(when)h(parsing)g(the)f(expr)o(ession)358
4138 y Fj(3+5)p Fi(,)25 b(it)h(is)f(not)h(clear)e(after)g(r)o(eading)h
Fj(3)g Fi(whether)g(to)h(tr)o(eat)e(it)h(as)g(a)g(complete)g(expr)o
(ession)g(or)h(whether)358 4237 y(the)18 b(parser)f(should)i(continue)g
(r)o(eading.)24 b(Ther)o(efor)o(e)16 b(the)i(grammar)g(for)g(numeric)g
(expr)o(essions)g(should)358 4337 y(include)24 b(an)g(end)g(token.)36
b(Another)25 b(example)e(is)i(the)f(grammar)g(for)g(Lisp)g(expr)o
(essions.)36 b(In)24 b(Lisp,)h(it)g(is)358 4437 y(always)18
b(clear)f(when)i(you)g(should)g(stop)g(parsing,)f(so)h(you)g(do)f
Fg(not)g Fi(need)g(an)g(end)g(token.)25 b(In)19 b(fact,)f(it)g(may)358
4536 y(be)i(mor)o(e)g(useful)h(not)h(to)f(have)f(an)h(end)f(token,)h
(so)h(that)e(you)i(can)e(r)o(ead)f(in)i(several)f(Lisp)h(expr)o
(essions.)p Black 275 4702 a Fd(\017)p Black 41 w Fi(If)i(ther)o(e)g
(is)i(a)e(chance)h(of)g(ambiguity)-9 b(,)25 b(make)f(sur)o(e)f(to)h
(put)g(the)h(choices)f(in)h(the)f(or)o(der)f(you)h(want)h(them)358
4802 y(checked.)j(Usually)22 b(the)g(most)h(speci\002c)f(choice)g
(should)h(be)e(\002rst.)30 b(Empty)22 b(sequences)g(should)h(usually)
358 4902 y(be)d(last.)p Black 275 5068 a Fd(\017)p Black
41 w Fi(The)i(context)i(sensitive)f(scanner)g(is)g(not)g(appr)o
(opriate)e(for)i(all)g(grammars.)31 b(Y)-8 b(ou)24 b(might)g(try)f
(using)h(the)358 5167 y(insensitive)d(scanner)g(with)g(the)g
Fj(context-insensitive-scanner)16 b Fi(option)22 b(in)f(the)g(grammar)
-6 b(.)p Black 1878 5482 a(15)p Black eop
%%Page: 16 16
16 15 bop Black Black 150 217 a Fh(D)p 0 0 0.6 TeXcolorrgb
119 w(History)p Black 150 406 a Fi(Y)-8 b(apps)21 b(1)f(had)h(several)e
(limitations)k(that)d(bother)o(ed)g(me)h(while)g(writing)h(parsers:)p
Black 254 579 a(1.)p Black 41 w(It)h(was)h(not)g(possible)g(to)g
(insert)g(statements)g(into)g(the)g(generated)e(parser)-6
b(.)33 b(A)23 b(common)i(workar)o(ound)358 678 y(was)k(to)h(write)g(an)
f(auxilliary)g(function)i(that)e(executed)f(those)j(statements,)h(and)d
(to)h(call)f(that)g(func-)358 778 y(tion)k(as)e(part)h(of)g(the)g(r)o
(eturn)g(value)f(calculation.)60 b(For)32 b(example,)i(several)d(of)i
(my)f(parsers)f(had)h(an)358 877 y(\223append\(x,y\)\224)17
b(function)22 b(that)f(existed)f(solely)i(to)f(call)f
(\223x.append\(y\)\224.)p Black 254 1040 a(2.)p Black
41 w(The)27 b(way)g(in)h(which)g(grammars)f(wer)o(e)f(speci\002ed)h
(was)g(rather)g(r)o(estrictive:)37 b(a)27 b(r)o(ule)g(was)h(a)e(choice)
i(of)358 1139 y(clauses.)d(Each)20 b(clause)g(was)h(a)f(sequence)h(of)g
(tokens)h(and)e(r)o(ule)h(names,)f(followed)h(by)g(a)g(r)o(eturn)f
(value.)p Black 254 1301 a(3.)p Black 41 w(Optional)f(matching)h(had)f
(to)h(be)e(put)i(into)g(a)e(separate)g(r)o(ule)h(because)g(choices)g
(wer)o(e)f(only)j(made)d(at)h(the)358 1401 y(beginning)j(of)e(a)h(r)o
(ule.)p Black 254 1563 a(4.)p Black 41 w(Repetition)d(had)f(to)h(be)f
(speci\002ed)g(in)h(terms)g(of)f(r)o(ecursion.)24 b(Not)18
b(only)g(was)g(this)g(awkwar)o(d)e(\(sometimes)358 1663
y(r)o(equiring)21 b(additional)f(r)o(ules\),)h(I)f(had)h(to)g(add)f(a)g
(tail)g(r)o(ecursion)h(optimization)h(to)f(Y)-8 b(apps)21
b(to)g(transform)358 1762 y(the)f(r)o(ecursion)h(back)f(into)i(a)e
(loop.)275 1935 y(Y)-8 b(apps)21 b(2)f(addr)o(esses)f(each)h(of)h
(these)g(limitations.)p Black 254 2108 a(1.)p Black 41
w(Statements)26 b(can)h(occur)f(anywher)o(e)g(within)j(a)d(r)o(ule.)44
b(\(However)-6 b(,)27 b(only)h(one-line)f(statements)g(ar)o(e)f(al-)358
2208 y(lowed;)20 b(multiline)i(blocks)g(marked)e(by)g(indentation)i(ar)
o(e)d(not.\))p Black 254 2370 a(2.)p Black 41 w(Grammars)f(can)h(be)f
(speci\002ed)g(using)i(any)f(mix)g(of)g(sequences,)g(choices,)g
(tokens,)h(and)f(r)o(ule)f(names.)25 b(T)-8 b(o)358 2469
y(allow)21 b(for)f(complex)h(str)o(uctur)o(es,)f(par)o(entheses)g(can)h
(be)f(used)h(for)f(gr)o(ouping.)p Black 254 2631 a(3.)p
Black 41 w(Given)31 b(choices)h(and)f(par)o(enthesization,)i(optional)f
(matching)g(can)f(be)g(expr)o(essed)e(as)i(a)g(choice)h(be-)358
2731 y(tween)15 b(some)i(pattern)e(and)g(nothing.)26
b(In)16 b(addition,)g(Y)-8 b(apps)16 b(2)g(has)g(the)g(convenience)g
(syntax)g Fj([A)49 b(B)h(...])358 2831 y Fi(for)20 b(matching)i
Fj(A)49 b(B)h(...)20 b Fi(optionally)-9 b(.)p Black 254
2993 a(4.)p Black 41 w(Repetition)27 b(operators)f Fj(*)h
Fi(for)f(zer)o(o)f(or)i(mor)o(e)f(and)g Fj(+)h Fi(for)f(one)h(or)g(mor)
o(e)f(make)g(it)h(easy)f(to)h(specify)f(r)o(e-)358 3092
y(peating)20 b(patterns.)275 3265 y(It)30 b(is)h(my)g(hope)g(that)g(Y)
-8 b(apps)31 b(2)f(will)h(be)g(\003exible)f(enough)i(to)f(meet)f(my)i
(needs)e(for)g(another)h(year)-6 b(,)32 b(yet)150 3365
y(simple)21 b(enough)h(that)f(I)f(do)h(not)h(hesitate)e(to)h(use)g(it.)
150 3649 y Fh(E)p 0 0 0.6 TeXcolorrgb 120 w(Future)29
b(Extensions)p Black 150 3838 a Fi(I)24 b(am)g(still)h(investigating)h
(the)e(possibility)i(of)e(LL\(2\))f(and)h(higher)h(lookahead.)36
b(However)-6 b(,)24 b(it)h(looks)g(like)g(the)150 3937
y(r)o(esulting)c(parsers)f(will)h(be)g(somewhat)g(ugly)-9
b(.)275 4037 y(It)20 b(would)i(be)e(nice)h(to)g(contr)o(ol)g(choices)g
(with)h(user)o(-de\002ned)d(pr)o(edicates.)275 4137 y(The)c(most)i
(likely)f(futur)o(e)f(extension)i(is)f(backtracking.)23
b(A)15 b(grammar)g(pattern)h(like)g Fj(\(VAR)49 b(':=')g(expr\)?)f({{)i
(return)f(Assign\(VAR,expr\))d(}})k(:)g(expr)f({{)g(return)g(expr)g(}})
150 4236 y Fi(would)28 b(turn)g(into)h(code)e(that)h(attempted)f(to)h
(match)f Fj(VAR)50 b(':=')f(expr)p Fi(.)c(If)28 b(it)f(succeeded,)h(it)
g(would)g(r)o(un)150 4336 y Fj({{)49 b(return)g(...)g(}})p
Fi(.)g(If)29 b(it)g(failed,)g(it)g(would)h(match)e Fj(expr)49
b({{)h(return)f(expr)g(}})p Fi(.)g(Backtracking)150 4436
y(may)21 b(make)f(it)h(less)g(necessary)g(to)g(write)g(LL\(2\))e
(grammars.)150 4719 y Fh(F)p 0 0 0.6 TeXcolorrgb 120
w(References)p Black Black 254 4909 a Fi(1.)p Black 41
w(ANTLR/PCCTS,)g(by)i(T)-8 b(err)o(ence)20 b(Parr)-6
b(,)19 b(is)j(available)d(at)h(The)h(ANTLR)f(Home)i(Page.)p
Black 254 5071 a(2.)p Black 41 w(PyLR,)f(by)f(Scott)h(Cotton,)h(is)f
(at)f(his)h(Starship)g(page.)p Black 254 5233 a(3.)p
Black 41 w(John)g(A)-6 b(ycock's)21 b(Compiling)h(Little)f(Languages)f
(Framework.)p Black 1878 5482 a(16)p Black eop
%%Page: 17 17
17 16 bop Black Black Black 254 216 a Fi(4.)p Black 41
w(PyBison,)21 b(by)g(Scott)g(Hassan,)f(can)g(be)h(found)g(at)f(his)h
(Python)h(Pr)o(ojects)f(page.)p Black 254 382 a(5.)p
Black 41 w(mcf.pars,)e(by)i(Mike)f(C.)h(Fletcher)-6 b(,)20
b(is)h(available)e(at)i(his)g(web)g(page.)p Black 254
548 a(6.)p Black 41 w(kwParsing,)g(by)g(Aar)o(on)e(W)-8
b(atters,)21 b(is)g(available)e(at)h(his)i(Starship)e(page.)p
Black 1878 5482 a(17)p Black eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
